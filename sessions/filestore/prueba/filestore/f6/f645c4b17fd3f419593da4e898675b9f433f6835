)]}'
{"version": 3, "sources": ["/web/static/tests/legacy/helpers/test_utils_file.js", "/mail/static/tests/tours/discuss_public_tour.js", "/mail/static/tests/tours/mail_channel_as_guest_tour.js", "/mail/static/tests/tours/mail_full_composer_test_tour.js", "/mail/static/tests/tours/user_modify_own_profile_tour.js", "/portal/static/tests/tours/portal.js", "/account/static/tests/tours/account_dashboard_setup_bar_tests.js", "/account/static/tests/tours/tax_group_tests.js", "/sale/static/tests/tours/sale_signature.js", "/website/static/tests/tours/automatic_editor.js", "/website/static/tests/tours/carousel_content_removal.js", "/website/static/tests/tours/client_action_iframe_fallback.js", "/website/static/tests/tours/client_action_redirect.js", "/website/static/tests/tours/conditional_visibility.js", "/website/static/tests/tours/conditional_visibility_frontend.js", "/website/static/tests/tours/configurator_translation.js", "/website/static/tests/tours/default_shape_gets_palette_colors.js", "/website/static/tests/tours/edit_link_popover.js", "/website/static/tests/tours/edit_megamenu.js", "/website/static/tests/tours/edit_menus.js", "/website/static/tests/tours/edit_translated_page.js", "/website/static/tests/tours/focus_blur_snippets.js", "/website/static/tests/tours/gray_color_palette.js", "/website/static/tests/tours/grid_layout.js", "/website/static/tests/tours/homepage_edit_discard.js", "/website/static/tests/tours/html_editor.js", "/website/static/tests/tours/link_tools.js", "/website/static/tests/tours/media_dialog.js", "/website/static/tests/tours/multi_edition.js", "/website/static/tests/tours/page_manager.js", "/website/static/tests/tours/public_user_editor.js", "/website/static/tests/tours/reset_password.js", "/website/static/tests/tours/restricted_editor.js", "/website/static/tests/tours/rte.js", "/website/static/tests/tours/snippet_background_edition.js", "/website/static/tests/tours/snippet_cache_across_websites.js", "/website/static/tests/tours/snippet_countdown.js", "/website/static/tests/tours/snippet_editor_panel_options.js", "/website/static/tests/tours/snippet_empty_parent_autoremove.js", "/website/static/tests/tours/snippet_image_gallery.js", "/website/static/tests/tours/snippet_popup_add_remove.js", "/website/static/tests/tours/snippet_social_media.js", "/website/static/tests/tours/snippet_table_of_content.js", "/website/static/tests/tours/snippet_translation.js", "/website/static/tests/tours/snippet_version.js", "/website/static/tests/tours/snippets_all_drag_and_drop.js", "/website/static/tests/tours/specific_website_editor.js", "/website/static/tests/tours/start_cloned_snippet.js", "/website/static/tests/tours/translate_menu_name.js", "/website/static/tests/tours/website_click_tests.js", "/website/static/tests/tours/website_form_editor.js", "/website/static/tests/tours/website_form_editor_frontend.js", "/website/static/tests/tours/website_navbar_menu.js", "/website/static/tests/tours/website_page_options.js", "/website/static/tests/tours/website_snippets_menu_tabs.js", "/website/static/tests/tours/website_style_edition.js", "/website/static/src/client_actions/website_preview/website_preview_test_mode.js", "/stock/static/tests/tours/stock_report_tests.js", "/auth_totp/static/tests/totp_flow.js", "/auth_totp_mail/static/tests/totp_flow.js", "/auth_totp_portal/static/tests/totp_portal.js"], "mappings": "AAAA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9JA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9BA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/BA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxFA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1BA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClHA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnDA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnGA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzBA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjFA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1DA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACnBA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjFA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7MA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC9LA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1CA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClFA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/EA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC7CA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AClBA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9NA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvHA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChEA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACpCA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxFA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClPA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/WA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvCA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACxDA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACtJA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/DA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvDA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjKA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACpFA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1DA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3HA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjCA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzBA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC1CA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5jBA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AChNA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpBA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACzDA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjCA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpDA;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACZA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnVA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA", "sourcesContent": ["odoo.define('web.test_utils_file', function () {\n\"use strict\";\n\n/**\n * FILE Test Utils\n *\n * This module defines various utility functions to help simulate events with\n * files, such as drag-and-drop.\n *\n * Note that all methods defined in this module are exported in the main\n * testUtils file.\n */\n\n\n//------------------------------------------------------------------------------\n// Private functions\n//------------------------------------------------------------------------------\n\n/**\n * Create a fake object 'dataTransfer', linked to some files, which is passed to\n * drag and drop events.\n *\n * @param {Object[]} files\n * @returns {Object}\n */\nfunction _createFakeDataTransfer(files) {\n    return {\n        dropEffect: 'all',\n        effectAllowed: 'all',\n        files,\n        getData: function () {\n            return files;\n        },\n        items: [],\n        types: ['Files'],\n    };\n}\n\n//------------------------------------------------------------------------------\n// Public functions\n//------------------------------------------------------------------------------\n\n/**\n * Create a file object, which can be used for drag-and-drop.\n *\n * @param {Object} data\n * @param {string} data.name\n * @param {string} data.content\n * @param {string} data.contentType\n * @returns {Promise<Object>} resolved with file created\n */\nfunction createFile(data) {\n    // Note: this is only supported by Chrome, and does not work in Incognito mode\n    return new Promise(function (resolve, reject) {\n        var requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;\n        if (!requestFileSystem) {\n            throw new Error('FileSystem API is not supported');\n        }\n        requestFileSystem(window.TEMPORARY, 1024 * 1024, function (fileSystem) {\n            fileSystem.root.getFile(data.name, { create: true }, function (fileEntry) {\n                fileEntry.createWriter(function (fileWriter) {\n                    fileWriter.onwriteend = function (e) {\n                        fileSystem.root.getFile(data.name, {}, function (fileEntry) {\n                            fileEntry.file(function (file) {\n                                resolve(file);\n                            });\n                        });\n                    };\n                    fileWriter.write(new Blob([ data.content ], { type: data.contentType }));\n                });\n            });\n        });\n    });\n}\n\n/**\n * Drag a file over a DOM element\n *\n * @param {$.Element} $el\n * @param {Object} file must have been created beforehand (@see createFile)\n */\nfunction dragoverFile($el, file) {\n    var ev = new Event('dragover', { bubbles: true });\n    Object.defineProperty(ev, 'dataTransfer', {\n        value: _createFakeDataTransfer(file),\n    });\n    $el[0].dispatchEvent(ev);\n}\n\n/**\n * Drop a file on a DOM element.\n *\n * @param {$.Element} $el\n * @param {Object} file must have been created beforehand (@see createFile)\n */\nfunction dropFile($el, file) {\n    var ev = new Event('drop', { bubbles: true, });\n    Object.defineProperty(ev, 'dataTransfer', {\n        value: _createFakeDataTransfer([file]),\n    });\n    $el[0].dispatchEvent(ev);\n}\n\n/**\n * Drop some files on a DOM element.\n *\n * @param {$.Element} $el\n * @param {Object[]} files must have been created beforehand (@see createFile)\n */\nfunction dropFiles($el, files) {\n    var ev = new Event('drop', { bubbles: true, });\n    Object.defineProperty(ev, 'dataTransfer', {\n        value: _createFakeDataTransfer(files),\n    });\n    $el[0].dispatchEvent(ev);\n}\n\n/**\n * Set files in a file input\n *\n * @param {DOM.Element} el\n * @param {Object[]} files must have been created beforehand\n *   @see testUtils.file.createFile\n */\nfunction inputFiles(el, files) {\n    // could not use _createFakeDataTransfer as el.files assignation will only\n    // work with a real FileList object.\n    const dataTransfer = new window.DataTransfer();\n    for (const file of files) {\n        dataTransfer.items.add(file);\n    }\n    el.files = dataTransfer.files;\n    /**\n     * Changing files programatically is not supposed to trigger the event but\n     * it does in Chrome versions before 73 (which is on runbot), so in that\n     * case there is no need to make a manual dispatch, because it would lead to\n     * the files being added twice.\n     */\n    const versionRaw = navigator.userAgent.match(/Chrom(e|ium)\\/([0-9]+)\\./);\n    const chromeVersion = versionRaw ? parseInt(versionRaw[2], 10) : false;\n    if (!chromeVersion || chromeVersion >= 73) {\n        el.dispatchEvent(new Event('change'));\n    }\n}\n\n//------------------------------------------------------------------------------\n// Exposed API\n//------------------------------------------------------------------------------\n\nreturn {\n    createFile: createFile,\n    dragoverFile: dragoverFile,\n    dropFile: dropFile,\n    dropFiles,\n    inputFiles,\n};\n\n});\n", "/** @odoo-module **/\n\nimport tour from 'web_tour.tour';\n\ntour.register('mail/static/tests/tours/discuss_public_tour.js', {\n    test: true,\n}, [{\n    trigger: '.o_DiscussPublicView',\n    extraTrigger: '.o_ThreadView',\n}, {\n    content: \"Check that we are on channel page\",\n    trigger: '.o_ThreadView',\n    run() {\n        if (!window.location.pathname.startsWith('/discuss/channel')) {\n            console.error('Did not automatically redirect to channel page');\n        }\n        // Wait for modules to be loaded or failed for the next step\n        odoo.__DEBUG__.didLogInfo.then(() => {\n            const { missing, failed, unloaded } = odoo.__DEBUG__.jsModules;\n            if ([missing, failed, unloaded].some(arr => arr.length)) {\n                console.error(\"Couldn't load all JS modules.\", JSON.stringify({ missing, failed, unloaded }));\n            }\n            document.body.classList.add('o_mail_channel_public_modules_loaded');\n        });\n    },\n    extraTrigger: '.o_mail_channel_public_modules_loaded',\n}, {\n    content: \"Wait for all modules loaded check in previous step\",\n    trigger: '.o_mail_channel_public_modules_loaded',\n}]);\n", "/** @odoo-module **/\n\nimport tour from 'web_tour.tour';\n\ntour.register('mail/static/tests/tours/mail_channel_as_guest_tour.js', {\n    test: true,\n}, [{\n    content: \"Click join\",\n    trigger: '.o_WelcomeView_joinButton',\n    extraTrigger: '.o_ThreadView',\n}, {\n    content: \"Check that we are on channel page\",\n    trigger: '.o_ThreadView',\n    run() {\n        if (!window.location.pathname.startsWith('/discuss/channel')) {\n            console.error('Clicking on join button did not redirect to channel page');\n        }\n        // Wait for modules to be loaded or failed for the next step\n        odoo.__DEBUG__.didLogInfo.then(() => {\n            const { missing, failed, unloaded } = odoo.__DEBUG__.jsModules;\n            if ([missing, failed, unloaded].some(arr => arr.length)) {\n                console.error(\"Couldn't load all JS modules.\", JSON.stringify({ missing, failed, unloaded }));\n            }\n            document.body.classList.add('o_mail_channel_as_guest_tour_modules_loaded');\n        });\n    },\n    extraTrigger: '.o_mail_channel_as_guest_tour_modules_loaded',\n}, {\n    content: \"Wait for all modules loaded check in previous step\",\n    trigger: '.o_mail_channel_as_guest_tour_modules_loaded',\n}]);\n", "/** @odoo-module **/\n\nimport {\n    createFile,\n    inputFiles,\n} from 'web.test_utils_file';\n\nimport tour from 'web_tour.tour';\n\n/**\n * This tour depends on data created by python test in charge of launching it.\n * It is not intended to work when launched from interface. It is needed to test\n * an action (action manager) which is not possible to test with QUnit.\n * @see mail/tests/test_mail_full_composer.py\n */\ntour.register('mail/static/tests/tours/mail_full_composer_test_tour.js', {\n    test: true,\n}, [{\n    content: \"Click on Send Message\",\n    trigger: '.o_ChatterTopbar_buttonSendMessage',\n}, {\n    content: \"Write something in composer\",\n    trigger: '.o_ComposerTextInput_textarea',\n    run: 'text blahblah',\n}, {\n    content: \"Add one file in composer\",\n    trigger: '.o_Composer_buttonAttachment',\n    async run() {\n        const file = await createFile({\n            content: 'hello, world',\n            contentType: 'text/plain',\n            name: 'text.txt',\n        });\n        const messaging = await odoo.__DEBUG__.messaging;\n        const uploader = messaging.models['ComposerView'].all()[0].fileUploader;\n        inputFiles(\n            uploader.fileInput,\n            [file]\n        );\n    },\n}, {\n    content: \"Open full composer\",\n    trigger: '.o_Composer_buttonFullComposer',\n    extra_trigger: '.o_AttachmentCard:not(.o-isUploading)' // waiting the attachment to be uploaded\n}, {\n    content: \"Check the earlier provided attachment is listed\",\n    trigger: '.o_AttachmentCard[title=\"text.txt\"]',\n    run() {},\n}, {\n    content: \"Check subject is autofilled\",\n    trigger: '[name=\"subject\"] input',\n    run() {\n        const subjectValue = document.querySelector('[name=\"subject\"] input').value;\n        if (subjectValue !== \"Re: Test User\") {\n            console.error(\n                `Full composer should have \"Re: Test User\" in subject input (actual: ${subjectValue})`\n            );\n        }\n    },\n}, {\n    content: \"Check composer content is kept\",\n    trigger: '.o_field_html[name=\"body\"]',\n    run() {\n        const bodyContent = document.querySelector('.o_field_html[name=\"body\"]').textContent;\n        if (!bodyContent.includes(\"blahblah\")) {\n            console.error(\n                `Full composer should contain text from small composer (\"blahblah\") in body input (actual: ${bodyContent})`\n            );\n        }\n    },\n}, {\n    content: \"Open templates\",\n    trigger: '.o_field_widget[name=\"template_id\"] input',\n}, {\n    content: \"Check a template is listed\",\n    in_modal: false,\n    trigger: '.ui-autocomplete .ui-menu-item a:contains(\"Test template\")',\n    run() {},\n}, {\n    content: \"Send message\",\n    trigger: '.o_mail_send',\n}, {\n    content: \"Check message is shown\",\n    trigger: '.o_Message:contains(\"blahblah\")',\n}, {\n    content: \"Check message contains the attachment\",\n    trigger: '.o_Message .o_AttachmentCard_filename:contains(\"text.txt\")',\n}]);\n", "/** @odoo-module **/\n\nimport tour from 'web_tour.tour';\n\n/**\n * Verify that a user can modify their own profile information.\n */\ntour.register('mail/static/tests/tours/user_modify_own_profile_tour.js', {\n    test: true,\n}, [{\n    content: 'Open user account menu',\n    trigger: '.o_user_menu button',\n}, {\n    content: \"Open preferences / profile screen\",\n    trigger: '[data-menu=settings]',\n}, {\n    content: \"Update the email address\",\n    trigger: 'div[name=\"email\"] input',\n    run: 'text updatedemail@example.com',\n}, {\n    content: \"Save the form\",\n    trigger: 'button[name=\"preference_save\"]',\n}, {\n    content: \"Wait until the modal is closed\",\n    trigger: 'body:not(.modal-open)',\n}]);\n", "odoo.define('portal.tour', function (require) {\n'use strict';\n\nvar tour = require(\"web_tour.tour\");\n\ntour.register('portal_load_homepage', {\n    test: true,\n    url: '/my',\n},\n    [\n        {\n            content: \"Check portal is loaded\",\n            trigger: 'a[href*=\"/my/account\"]:contains(\"Edit\"):first',\n        },\n        {\n            content: \"Load my account details\",\n            trigger: 'input[value=\"Joel Willis\"]'\n        }\n    ]\n);\n\n});\n", "odoo.define('account.dashboard.setup.tour', function (require) {\n    \"use strict\";\n\n    var core = require('web.core');\n    var tour = require('web_tour.tour');\n\n    var _t = core._t;\n\n    tour.register('account_render_report', {\n        test: true,\n        url: '/web',\n    }, [tour.stepUtils.showAppsMenuItem(),\n    {\n        id: 'account_menu_click',\n        trigger: '.o_app[data-menu-xmlid=\"account.menu_finance\"]',\n        position: 'bottom',\n    }, {\n        trigger: '.o_data_row:first .o_data_cell',\n        extra_trigger: '.breadcrumb',\n    }, {\n        trigger: '.o_control_panel button:contains(\"' + _t('Print') + '\")',\n    }, {\n        trigger: '.o_control_panel .o-dropdown--menu span:contains(\"' + _t('Invoices without Payment') + '\")',\n    }, {\n        trigger: 'iframe .o_report_layout_standard h2',\n        content: 'Primary color is correct',\n        run: function () {\n            if (this.$anchor.css('color') !== \"rgb(18, 52, 86)\") {\n                console.error('The primary color should be the one set on the company.');\n            }\n        },\n    }, {\n        trigger: 'iframe .o_report_layout_standard #informations div strong',\n        content: 'Secondary color is correct',\n        run: function () {\n            if (this.$anchor.css('color') !== \"rgb(120, 145, 1)\") {\n                console.error('The secondary color should be the one set on the company.');\n            }\n        },\n    }\n        ]);\n});\n", "/** @odoo-module alias=account.tax.group.tour.tests */\n\"use strict\";\n\nimport tour from 'web_tour.tour';\n\ntour.register('account_tax_group', {\n    test: true,\n    url: \"/web\",\n}, [tour.stepUtils.showAppsMenuItem(),\n    {\n        content: \"Go to Invoicing\",\n        trigger: '.o_app[data-menu-xmlid=\"account.menu_finance\"]',\n        edition: 'community',\n    },\n    {\n        content: \"Go to Accounting\",\n        trigger: '.o_app[data-menu-xmlid=\"account_accountant.menu_accounting\"]',\n        edition: 'enterprise',\n    },\n    {\n        content: \"Go to Vendors\",\n        trigger: 'a:contains(\"Vendors\")',\n    },\n    {\n        content: \"Go to Bills\",\n        trigger: 'span:contains(\"Bills\")',\n    },\n    {\n        extra_trigger: '.breadcrumb:contains(\"Bills\")',\n        content: \"Create new bill\",\n        trigger: '.o_list_button_add',\n    },\n    // Set a vendor\n    {\n        content: \"Add vendor\",\n        trigger: 'div.o_field_widget.o_field_many2one[name=\"partner_id\"] div input',\n        run: 'text Azure Interior',\n    },\n    {\n        content: \"Valid vendor\",\n        trigger: '.ui-menu-item a:contains(\"Azure Interior\")',\n    },\n    // Add First product\n    {\n        content: \"Add items\",\n        trigger: 'div[name=\"invoice_line_ids\"] .o_field_x2many_list_row_add a:contains(\"Add a line\")',\n    },\n    {\n        content: \"Select input\",\n        trigger: 'div[name=\"invoice_line_ids\"] .o_list_view .o_selected_row .o_list_many2one:first input',\n    },\n    {\n        content: \"Type item\",\n        trigger: 'div[name=\"invoice_line_ids\"] .o_list_view .o_selected_row .o_list_many2one:first input',\n        run: \"text Large Desk\",\n    },\n    {\n        content: \"Valid item\",\n        trigger: '.ui-menu-item-wrapper:contains(\"Large Desk\")',\n    },\n    // Save account.move\n    {\n        content: \"Save the account move\",\n        trigger: '.o_form_button_save',\n    },\n    // Edit tax group amount\n    {\n        content: \"Edit tax group amount\",\n        trigger: '.o_tax_group_edit',\n    },\n    {\n        content: \"Modify the input value\",\n        trigger: '.o_tax_group_edit_input input',\n        run: function (actions) {\n            $('.o_tax_group_edit_input input').val(200);\n            $('.o_tax_group_edit_input input').select();\n            $('.o_tax_group_edit_input input').blur();\n        },\n    },\n    // Check new value for total (with modified tax_group_amount).\n    {\n        content: \"Valid total amount\",\n        trigger: 'span[name=\"amount_total\"]:contains(\"1,499.00\")',\n    },\n    // Modify the quantity of the object\n    {\n        content: \"Select item quantity\",\n        trigger: 'div[name=\"invoice_line_ids\"] .o_list_view tbody tr.o_data_row .o_list_number[title=\"1.00\"]',\n    },\n    {\n        content: \"Change item quantity\",\n        trigger: 'div[name=\"invoice_line_ids\"] .o_list_view tbody tr.o_data_row .o_list_number[title=\"1.00\"] input',\n        run: 'text 2',\n    },\n    {\n        content: \"Valid the new value\",\n        trigger: 'div[name=\"invoice_line_ids\"] .o_list_view tbody tr.o_data_row .o_list_number[title=\"1.00\"] input',\n        run: function (actions) {\n            let keydownEvent = jQuery.Event('keydown');\n            keydownEvent.which = 13;\n            this.$anchor.trigger(keydownEvent);\n        },\n    },\n    // Save form\n    {\n        content: \"Save the account move\",\n        trigger: '.o_form_button_save',\n    },\n    // Check new tax group value\n    {\n        content: \"Check new value of tax group\",\n        trigger: '.o_tax_group_amount_value:contains(\"389.70\")',\n    },\n]);\n", "odoo.define('sale.tour_sale_signature', function (require) {\n'use strict';\n\nvar tour = require('web_tour.tour');\n\n// This tour relies on data created on the Python test.\ntour.register('sale_signature', {\n    test: true,\n    url: '/my/quotes',\n},\n[\n    {\n        content: \"open the test SO\",\n        trigger: 'a:containsExact(\"test SO\")',\n    },\n    {\n        content: \"click sign\",\n        trigger: 'a:contains(\"Sign\")',\n    },\n    {\n        content: \"check submit is enabled\",\n        trigger: '.o_portal_sign_submit:enabled',\n        run: function () {},\n    },\n    {\n        content: \"click select style\",\n        trigger: '.o_web_sign_auto_select_style a',\n    },\n    {\n        content: \"click style 4\",\n        trigger: '.o_web_sign_auto_font_selection a:eq(3)',\n    },\n    {\n        content: \"click submit\",\n        trigger: '.o_portal_sign_submit:enabled',\n    },\n    {\n        content: \"check it's confirmed\",\n        trigger: '#quote_content:contains(\"Thank You\")',\n    }, {\n        trigger: '#quote_content',\n        run: function () {\n            window.location.href = window.location.origin + '/web';\n        },  // Avoid race condition at the end of the tour by returning to the home page.\n    },\n    {\n        trigger: 'nav',\n        run: function() {},\n    }\n]);\n});\n", "odoo.define('website.tour.automatic_editor', function (require) {\n'use strict';\n\nconst wTourUtils = require(\"website.tour_utils\");\n\nwTourUtils.registerWebsitePreviewTour('automatic_editor_on_new_website', {\n    test: true,\n    url: '/',\n},\n[\n    {\n        content: \"Select the language dropdown\",\n        trigger: 'iframe .js_language_selector .dropdown-toggle'\n    },\n    {\n        content: \"click on Add a language\",\n        trigger: 'iframe a.o_add_language',\n    },\n    {\n        content: \"type Parseltongue\",\n        trigger: 'div[name=\"lang_ids\"] .o_input_dropdown input',\n        run: 'text Parseltongue',\n    },\n    {\n        content: 'select Parseltongue',\n        trigger: '.dropdown-item:contains(Parseltongue)',\n        in_modal: false,\n    },\n    {\n        content: \"load parseltongue\",\n        extra_trigger: '.modal div[name=\"lang_ids\"] .rounded-pill .o_tag_badge_text:contains(Parseltongue)',\n        trigger: '.modal-footer button[name=lang_install]',\n    },\n    {\n        content: \"Select the language dropdown\",\n        trigger: 'iframe .js_language_selector .dropdown-toggle',\n    },\n    {\n        content: \"Select parseltongue\",\n        trigger: 'iframe a.js_change_lang[data-url_code=pa_GB]',\n        extra_trigger: 'iframe a.js_change_lang .o_lang_flag',\n    },\n    {\n        content: \"Check that we're on parseltongue and then go to settings\",\n        trigger: 'iframe html[lang=pa-GB]',\n        run: () => {\n            // Now go through the settings for a new website. A frontend_lang\n            // cookie was set during previous steps. It should not be used when\n            // redirecting to the frontend in the following steps.\n            window.location.href = '/web#action=website.action_website_configuration';\n        }\n    },\n    {\n        content: \"create a new website\",\n        trigger: 'button[name=\"action_website_create_new\"]',\n    },\n    {\n        content: \"insert website name\",\n        trigger: 'div[name=\"name\"] input',\n        run: 'text Website EN'\n    },\n    {\n        content: \"validate the website creation modal\",\n        trigger: 'button.btn-primary'\n    },\n    {\n        content: \"skip configurator\",\n        // This trigger targets the skip button, it doesn't have a more\n        // explicit class or ID.\n        trigger: '.o_configurator_container .container-fluid .btn.btn-link'\n    },\n    {\n        content: \"make hover button appear\",\n        trigger: '.o_theme_preview',\n        run: () => {\n            $('.o_theme_preview .o_button_area').attr('style', 'visibility: visible; opacity: 1;');\n        },\n    },\n    {\n        content: \"Install a theme\",\n        trigger: 'button[name=\"button_choose_theme\"]'\n    },\n    {\n        content: \"Check that the editor is loaded\",\n        trigger: 'iframe body.editor_enable',\n        timeout: 30000,\n        run: () => null, // it's a check\n    },\n    {\n        content: \"exit edit mode\",\n        trigger: '.o_we_website_top_actions button.btn-primary:contains(\"Save\")',\n    },\n    {\n        content: \"wait for editor to close\",\n        trigger: 'iframe body:not(.editor_enable)',\n        run: () => null, // It's a check\n    }\n]);\n});\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour(\"carousel_content_removal\", {\n    test: true,\n    url: '/',\n    edition: true,\n}, [{\n    trigger: \"#snippet_structure .oe_snippet:has(span:contains('Carousel')) .oe_snippet_thumbnail\",\n    content: \"Drag the Carousel block and drop it in your page.\",\n    run: \"drag_and_drop iframe #wrap\",\n},\n{\n    trigger: \"iframe .carousel .carousel-item.active .carousel-content\",\n    content: \"Select the active carousel item.\",\n}, {\n    trigger: \"iframe .oe_overlay.oe_active .oe_snippet_remove\",\n    content: \"Remove the active carousel item.\",\n},\n{\n    trigger: \"iframe .carousel .carousel-item.active .container:not(:has(*))\",\n    content: \"Check for a carousel slide with an empty container tag\",\n    run: function () {},\n}]);\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('client_action_iframe_fallback', {\n    test: true,\n    url: '/',\n},\n[\n    {\n        content: \"Ensure we are on the expected page\",\n        trigger: 'body iframe html[data-view-xmlid=\"website.homepage\"]',\n        run: () => {}, // It's a check.\n    }, {\n        content: \"Ensure the iframe fallback is not loaded in test mode\",\n        trigger: 'body',\n        run: () => {\n            if (document.querySelector('iframe[src=\"/website/iframefallback\"]')) {\n                console.error(\"The iframe fallback shouldn't be inside the DOM.\");\n            }\n        },\n    },\n]);\n", "/** @odoo-module */\n\nimport tour from 'web_tour.tour';\n\nconst testUrl = '/test_client_action_redirect';\n\nconst goToFrontendSteps = [{\n    content: \"Go to the frontend\",\n    trigger: 'body',\n    run: () => {\n        window.location.href = testUrl;\n    },\n}, {\n    content: \"Check we are in the frontend\",\n    trigger: 'body:not(:has(.o_website_preview)) #test_contact_FE',\n    run: () => null, // it's a check\n}];\nconst goToBackendSteps = [{\n    content: \"Go to the backend\",\n    trigger: 'body',\n    run: () => {\n        window.location.href = `/@${testUrl}`;\n    },\n}, {\n    content: \"Check we are in the backend\",\n    trigger: '.o_website_preview',\n    run: () => null, // it's a check\n}];\nconst checkEditorSteps = [{\n    content: \"Check that the editor is loaded\",\n    trigger: 'iframe body.editor_enable',\n    timeout: 30000,\n    run: () => null, // it's a check\n}, {\n    content: \"exit edit mode\",\n    trigger: '.o_we_website_top_actions button.btn-primary:contains(\"Save\")',\n}, {\n    content: \"wait for editor to close\",\n    trigger: 'iframe body:not(.editor_enable)',\n    run: () => null, // It's a check\n}];\n\ntour.register('client_action_redirect', {\n    test: true,\n    url: testUrl,\n},\n[\n    // Case 1: From frontend, click on `enable_editor=1` link without `/@/` in it\n    ...goToFrontendSteps,\n    {\n        content: \"Click on the link to frontend\",\n        trigger: '#test_contact_FE',\n    },\n    ...checkEditorSteps,\n\n    // Case 2: From frontend, click on `enable_editor=1` link with `/@/` in it\n    ...goToFrontendSteps,\n    {\n        content: \"Click on the link to backend\",\n        trigger: '#test_contact_BE',\n    },\n    ...checkEditorSteps,\n\n    // Case 3: From backend, click on `enable_editor=1` link without `/@/` in it\n    // TODO: This will be fixed in another fix related to the listening of the\n    //       URL changes from the client action.\n    // ...goToBackendSteps,\n    // {\n    //     content: \"Click on the link to frontend (2)\",\n    //     trigger: 'iframe #test_contact_FR',\n    // },\n    // ...checkEditorSteps,\n\n    // Case 4: From backend, click on `enable_editor=1` link with `/@/` in it\n    ...goToBackendSteps,\n    {\n        content: \"Click on the link to backend (2)\",\n        trigger: 'iframe #test_contact_BE',\n    },\n    ...checkEditorSteps,\n]);\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nconst snippets = [\n    {\n        id: 's_text_image',\n        name: 'Text - Image',\n    },\n];\nwTourUtils.registerWebsitePreviewTour('conditional_visibility_1', {\n    edition: true,\n    url: '/',\n    test: true,\n}, [\nwTourUtils.dragNDrop(snippets[0]),\nwTourUtils.clickOnSnippet(snippets[0]),\nwTourUtils.changeOption('ConditionalVisibility', 'we-toggler'),\n{\n    content: 'click on conditional visibility',\n    trigger: '[data-name=\"visibility_conditional\"]',\n    run: 'click',\n},\n{\n    content: 'click on utm medium toggler',\n    trigger: '[data-save-attribute=\"visibilityValueUtmMedium\"] we-toggler',\n    run: 'click',\n},\n{\n    trigger: '[data-save-attribute=\"visibilityValueUtmMedium\"] we-selection-items [data-add-record=\"Email\"]',\n    content: 'click on Email',\n    run: 'click',\n},\n...wTourUtils.clickOnSave(),\n{\n    content: 'Check if the rule was applied',\n    extra_trigger: '.o_website_preview:only-child',\n    trigger: 'iframe #wrap',\n    run: function (actions) {\n        const style = window.getComputedStyle(this.$anchor[0].getElementsByClassName('s_text_image')[0]);\n        if (style.display !== 'none') {\n            console.error('error This item should be invisible and only visible if utm_medium === email');\n        }\n    },\n},\nwTourUtils.clickOnEdit(),\n{\n    content: 'Check if the element is visible as it should always be visible in edit view',\n    extra_trigger: 'body.editor_has_snippets',\n    trigger: 'iframe #wrap .s_text_image',\n    run: function (actions) {\n        const style = window.getComputedStyle((this.$anchor[0]));\n        if (style.display === 'none') {\n            console.error('error This item should now be visible because utm_medium === email');\n        }\n    },\n},\n]);\n", "/** @odoo-module **/\n\nimport tour from 'web_tour.tour';\n\ntour.register('conditional_visibility_2', {\n    test: true,\n    url: '/?utm_medium=Email',\n},\n[{\n    content: 'The content previously hidden should now be visible',\n    trigger: 'body #wrap',\n    run: function (actions) {\n        const style = window.getComputedStyle(this.$anchor[0].getElementsByClassName('s_text_image')[0]);\n        if (style.display === 'none') {\n            console.error('error This item should now be visible because utm_medium === email');\n        }\n    },\n},\n]);\n", "/** @odoo-module */\n\nimport tour from 'web_tour.tour';\n\ntour.register('configurator_translation', {\n    test: true,\n    url: '/website/configurator',\n},\n[\n    // Configurator first screen\n    {\n        content: \"click next\",\n        trigger: 'button.o_configurator_show',\n    },\n    // Make sure \"Back\" works\n    {\n        content: \"use browser's Back\",\n        trigger: 'a.o_change_website_type',\n        run: () => {\n            window.history.back();\n        },\n    }, {\n        content: \"return to description screen\",\n        trigger: 'button.o_configurator_show',\n    },\n    // Description screen\n    {\n        content: \"select a website type\",\n        trigger: 'a.o_change_website_type',\n    }, {\n        content: \"insert a website industry\",\n        trigger: '.o_configurator_industry input',\n        run: 'text ab',\n    }, {\n        content: \"select a website industry from the autocomplete\",\n        trigger: '.o_configurator_industry_wrapper ul li a:contains(\"in fr\")',\n    }, {\n        content: \"select an objective\",\n        trigger: '.o_configurator_purpose_dd a',\n    }, {\n        content: \"choose from the objective list\",\n        trigger: 'a.o_change_website_purpose',\n    },\n    // Palette screen\n    {\n        content: \"chose a palette card\",\n        trigger: '.palette_card',\n    },\n    // Features screen\n    {\n        content: \"select confidentialit\u00e9\",\n        trigger: '.card:contains(confidentialit\u00e9)',\n    }, {\n        content: \"Click on build my website\",\n        trigger: 'button.btn-primary',\n    }, {\n        content: \"Loader should be shown\",\n        trigger: '.o_website_loader_container',\n        run: function () {}, // it's a check\n    }, {\n        content: \"Wait untill the configurator is finished\",\n        trigger: '#oe_snippets.o_loaded',\n        timeout: 30000,\n    }, {\n        // Check the content of the save button to make sure the website is in\n        // French. (The editor should be in the website's default language,\n        // which should be french in this test.)\n        // Also note that sometimes the translation is being changed on\n        // Transifex from \"Sauvegarder\" to \"Sauver\" or the other way around.\n        // TODO: Strengthen this tour by creating a new fake language and some\n        //       translations for the checked terms. See what's done in `Sign`\n        //       `test_translate_sign_instructions` tour with the `Parseltongue`\n        //       language.\n        content: \"exit edit mode\",\n        trigger: '.o_we_website_top_actions button.btn-primary:contains(\"Sauvegarder\"), .o_we_website_top_actions button.btn-primary:contains(\"Sauver\")',\n    }, {\n         content: \"wait for editor to be closed\",\n         trigger: 'iframe body:not(.editor_enable)',\n         run: function () {}, // It's a check.\n    }\n]);\n", "odoo.define(\"website.tour.default_shape_gets_palette_colors\", function (require) {\n\"use strict\";\n\nconst wTourUtils = require('website.tour_utils');\n\nwTourUtils.registerWebsitePreviewTour(\"default_shape_gets_palette_colors\", {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.dragNDrop({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    wTourUtils.clickOnSnippet({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    wTourUtils.changeOption('ColoredLevelBackground', 'Shape'),\n    {\n        content: \"Check that shape does not have a background-image in its inline style\",\n        trigger: 'iframe #wrap .s_text_image .o_we_shape',\n        run: () => {\n            const shape = $('iframe:not(.o_ignore_in_tour)').contents().find('#wrap .s_text_image .o_we_shape')[0];\n            if (shape.style.backgroundImage) {\n                console.error(\"error The default shape has a background-image in its inline style (should rely on the class)\");\n            }\n        },\n    },\n]);\n});\n", "odoo.define(\"website.tour.edit_link_popover\", function (require) {\n\"use strict\";\n\nconst wTourUtils = require('website.tour_utils');\n\nconst FIRST_PARAGRAPH = 'iframe #wrap .s_text_image p:nth-child(2)';\n\nconst clickFooter = [{\n    content: \"Save the link by clicking outside the URL input (not on a link element)\",\n    trigger: 'iframe footer h5:first',\n}, {\n    content: \"Wait delayed click on footer\",\n    trigger: '.o_we_customize_panel we-title:contains(\"Footer\")',\n    run: function () {}, // it's a check\n}];\n\nconst clickEditLink = [{\n    content: \"Click on Edit Link in Popover\",\n    trigger: 'iframe .o_edit_menu_popover .o_we_edit_link',\n}, {\n    content: \"Ensure popover is closed\",\n    trigger: 'iframe html:not(:has(.o_edit_menu_popover))', // popover should be closed\n    run: function () {}, // it's a check\n    in_modal: false,\n}];\n\nwTourUtils.registerWebsitePreviewTour('edit_link_popover', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    // 1. Test links in page content (web_editor)\n    wTourUtils.dragNDrop({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    {\n        content: \"Click on a paragraph\",\n        trigger: FIRST_PARAGRAPH,\n        run: 'text Paragraph', // Make sure the selection is set in the paragraph\n    },\n    {\n        content: \"Click on 'Link' to open Link Dialog\",\n        trigger: \"#toolbar #create-link\",\n    },\n    {\n        content: \"Type the link URL /contactus\",\n        trigger: '#o_link_dialog_url_input',\n        run: 'text /contactus'\n    },\n    ...clickFooter,\n    {\n        content: \"Click on newly created link\",\n        trigger: `${FIRST_PARAGRAPH} a`,\n    },\n    {\n        content: \"Popover should be shown\",\n        trigger: 'iframe .o_edit_menu_popover .o_we_url_link:contains(\"Contact Us\")', // At this point preview is loaded\n        run: function () {}, // it's a check\n    },\n    ...clickEditLink,\n    {\n        content: \"Type the link URL /\",\n        trigger: '#o_link_dialog_url_input',\n        run: \"text /\"\n    },\n    ...clickFooter,\n    {\n        content: \"Click on link\",\n        trigger: `${FIRST_PARAGRAPH} a`,\n    },\n    {\n        content: \"Popover should be shown with updated preview data\",\n        trigger: 'iframe .o_edit_menu_popover .o_we_url_link:contains(\"Home\")',\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Click on Remove Link in Popover\",\n        trigger: 'iframe .o_edit_menu_popover .o_we_remove_link',\n    },\n    {\n        content: \"Link should be removed\",\n        trigger: `${FIRST_PARAGRAPH}:not(:has(a))`,\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Ensure popover is closed\",\n        trigger: 'iframe html:not(:has(.o_edit_menu_popover))', // popover should be closed\n        run: function () {}, // it's a check\n    },\n    // 2. Test links in navbar (website)\n    {\n        content: \"Click navbar menu Home\",\n        trigger: 'iframe #top_menu a:contains(\"Home\")',\n    },\n    {\n        content: \"Popover should be shown (2)\",\n        trigger: 'iframe .o_edit_menu_popover .o_we_url_link:contains(\"Home\")',\n        run: function () {}, // it's a check\n    },\n    ...clickEditLink,\n    {\n        content: \"Change the URL\",\n        trigger: '#url_input',\n        run: \"text /contactus\"\n    },\n    {\n        content: \"Save the Edit Menu modal\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"Click on the Home menu again\",\n        extra_trigger: 'div:not(.o_loading_dummy) > #oe_snippets',\n        trigger: 'iframe #top_menu a:contains(\"Home\")[href=\"/contactus\"]',\n    },\n    {\n        content: \"Popover should be shown with updated preview data (2)\",\n        trigger: 'iframe .o_edit_menu_popover .o_we_url_link:contains(\"Contact Us\")',\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Click on Edit Menu in Popover\",\n        trigger: 'iframe .o_edit_menu_popover .js_edit_menu',\n    },\n    {\n        content: \"Edit Menu (tree) should open\",\n        trigger: '.o_website_dialog .oe_menu_editor',\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Close modal\",\n        trigger: '.modal-footer .btn-secondary',\n    },\n    // 3. Test other links (CTA in navbar & links in footer)\n    {\n        content: \"Click CTA in navbar\",\n        trigger: 'iframe #top_menu_container a.btn-primary[href=\"/contactus\"]',\n    },\n    {\n        content: \"Popover should be shown (3)\",\n        trigger: 'iframe .o_edit_menu_popover .o_we_url_link:contains(\"Contact Us\")',\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Toolbar should be shown (3)\",\n        trigger: '#toolbar:has(#o_link_dialog_url_input:propValue(/contactus))',\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Click 'Home' link in footer\",\n        trigger: 'iframe footer a[href=\"/\"]',\n    },\n    {\n        content: \"Popover should be shown (4)\",\n        trigger: 'iframe .o_edit_menu_popover .o_we_url_link:contains(\"Home\")',\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Toolbar should be shown (4)\",\n        trigger: '#toolbar:has(#o_link_dialog_url_input:propValue(/))',\n        run: function () {}, // it's a check\n    },\n    // 4. Popover should close when clicking non-link element\n    ...clickFooter,\n    // 5. Double click should not open popover but should open toolbar link\n    {\n        content: \"Double click on link\",\n        extra_trigger: 'iframe html:not(:has(.o_edit_menu_popover))', // popover should be closed\n        trigger: 'iframe footer a[href=\"/\"]',\n        run: function (actions) {\n            // Create range to simulate real double click, see pull request\n            const range = document.createRange();\n            range.selectNodeContents(this.$anchor[0]);\n            const sel = window.getSelection();\n            sel.removeAllRanges();\n            sel.addRange(range);\n            actions.click();\n            actions.dblclick();\n        },\n    },\n    {\n        content: \"Ensure popover is opened on double click, and so is right panel edit link\",\n        trigger: 'html:has(#o_link_dialog_url_input)',\n        extra_trigger: 'iframe html:has(.o_edit_menu_popover)',\n        run: function () {}, // it's a check\n    },\n    {\n        content: \"Ensure that a click on the link popover link opens a new window\",\n        trigger: 'iframe .o_edit_menu_popover a.o_we_url_link[target=\"_blank\"]',\n        extra_trigger: 'iframe .o_edit_menu_popover a.o_we_full_url[target=\"_blank\"]',\n        run: function (actions) {\n            this.$anchor[0].addEventListener('click', (ev) => {\n                const originalPreventDefault = ev.preventDefault.bind(ev);\n                ev.preventDefault = () => {\n                    throw new Error(\n                        \"The link popover should not be default prevented as to open a new tab\"\n                    );\n                };\n                originalPreventDefault(); // We do not want to open a new tab in a tour\n            }, {once: true, capture: true});\n            actions.click();\n        },\n    },\n]);\n});\n", "odoo.define(\"website.tour.edit_megamenu\", function (require) {\n\"use strict\";\n\nconst wTourUtils = require('website.tour_utils');\n\nconst toggleMegaMenu = (stepOptions) => Object.assign({}, {\n    content: \"Toggles the mega menu.\",\n    trigger: 'iframe #top_menu .nav-item a.o_mega_menu_toggle',\n    run: function () {\n        // If the mega menu is displayed inside the extra menu items, it should\n        // already be displayed.\n        if (!this.$anchor[0].closest('.o_extra_menu_items')) {\n            this.$anchor[0].dispatchEvent(new Event('click'))\n        }\n    },\n}, stepOptions);\n\nwTourUtils.registerWebsitePreviewTour('edit_megamenu', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    // Add a megamenu item to the top menu.\n    {\n        content: \"Click on a menu item\",\n        extra_trigger: '#oe_snippets.o_loaded',\n        trigger: 'iframe #top_menu .nav-item a',\n    },\n    {\n        content: \"Click on 'Link' to open Link Dialog\",\n        trigger: 'iframe .o_edit_menu_popover a.js_edit_menu',\n    },\n    {\n        content: \"Trigger the link dialog (click 'Add Mega Menu Item')\",\n        extra_trigger: '.o_website_dialog:visible',\n        trigger: '.modal-body a:eq(1)',\n    },\n    {\n        content: \"Write a label for the new menu item\",\n        trigger: '.modal-dialog .o_website_dialog input',\n        run: 'text Megaaaaa!'\n    },\n    {\n        content: \"Confirm the mega menu label\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"Save the website menu with a new mega menu\",\n        trigger: '.modal-footer .btn-primary',\n        extra_trigger: '.oe_menu_editor [data-is-mega-menu=\"true\"] .js_menu_label:contains(\"Megaaaaa!\")',\n    },\n    // Edit a menu item\n    wTourUtils.clickOnExtraMenuItem({extra_trigger: '#oe_snippets.o_loaded'}, true),\n    toggleMegaMenu({extra_trigger: 'iframe #top_menu .nav-item a.o_mega_menu_toggle:contains(\"Megaaaaa!\")'}),\n    {\n        content: \"Select the last menu link of the first column\",\n        trigger: 'iframe .s_mega_menu_odoo_menu .row > div:first-child .nav > :nth-child(6)', // 6th is the last one\n    },\n    {\n        content: \"Hit the delete button to remove the menu link\",\n        trigger: 'iframe .oe_overlay .oe_snippet_remove',\n    },\n    {\n        content: \"Check that the last menu link was deleted\",\n        trigger: 'iframe .s_mega_menu_odoo_menu .row > div:first-child .nav:not(:has(> :nth-child(6)))',\n        run: () => null,\n    },\n    {\n        content: \"Clicks on the first title item.\",\n        trigger: 'iframe .o_mega_menu h4',\n    },\n    {\n        content: \"Press enter.\",\n        trigger: 'iframe .o_mega_menu h4',\n        run: function (actions) {\n            this.$anchor[0].dispatchEvent(new window.InputEvent('input', {bubbles: true, inputType: 'insertParagraph'}));\n        },\n    },\n    {\n        content: \"The menu should still be visible. Edit a menu item.\",\n        trigger: 'iframe .o_mega_menu h4',\n        run: 'text New Menu Item',\n    },\n    ...wTourUtils.clickOnSave(),\n    wTourUtils.clickOnExtraMenuItem({extra_trigger: 'iframe body:not(.editor_enable)'}, true),\n    toggleMegaMenu(),\n    {\n        content: \"The menu item should have been renamed.\",\n        trigger: 'iframe .o_mega_menu h4:contains(\"New Menu Item\")',\n        run: function () {}, // it's a check\n    },\n]);\n});\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('edit_menus', {\n    test: true,\n    url: '/',\n}, [\n    // Add a megamenu item from the menu.\n    {\n        content: \"open site menu\",\n        extra_trigger: \"iframe #wrapwrap\",\n        trigger: 'button[data-menu-xmlid=\"website.menu_site\"]',\n    },\n    {\n        content: \"Click on Edit Menu\",\n        trigger: 'a[data-menu-xmlid=\"website.menu_edit_menu\"]',\n    },\n    {\n        content: \"Trigger the link dialog (click 'Add Mega Menu Item')\",\n        extra_trigger: '.o_website_dialog:visible',\n        trigger: '.modal-body a:eq(1)',\n    },\n    {\n        content: \"Write a label for the new menu item\",\n        trigger: '.modal-dialog .o_website_dialog input',\n        run: 'text Megaaaaa!'\n    },\n    {\n        content: \"Confirm the mega menu label\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"Save the new menu\",\n        trigger: '.modal-footer .btn-primary',\n        extra_trigger: '.oe_menu_editor [data-is-mega-menu=\"true\"] .js_menu_label:contains(\"Megaaaaa!\")',\n    },\n    wTourUtils.clickOnExtraMenuItem({extra_trigger: 'body:not(:has(.oe_menu_editor))'}, true),\n    {\n        content: \"There should be a new megamenu item.\",\n        trigger: 'iframe #top_menu .nav-item a.o_mega_menu_toggle:contains(\"Megaaaaa!\")',\n        run: () => {}, // It's a check.\n    },\n    // Add a menu item in edit mode.\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"Click on a menu item\",\n        trigger: 'iframe #top_menu .nav-item a',\n        extra_trigger: '#oe_snippets.o_loaded',\n    },\n    {\n        content: \"Click on Edit Menu\",\n        trigger: 'iframe .o_edit_menu_popover a.js_edit_menu',\n    },\n    {\n        content: \"Trigger the link dialog (click 'Add Menu Item')\",\n        extra_trigger: '.o_website_dialog:visible',\n        trigger: '.modal-body a:eq(0)',\n    },\n    {\n        content: \"Confirm the new menu entry without a label\",\n        extra_trigger: '.modal-dialog .o_website_dialog input:eq(0)',\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"It didn't save without a label. Fill label input.\",\n        extra_trigger: '.o_website_dialog:eq(1):visible',\n        trigger: '.modal-dialog .o_website_dialog input:eq(0)',\n        run: 'text Random!',\n    },\n    {\n        content: \"Confirm the new menu entry without a url\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"It didn't save without a url. Fill url input.\",\n        trigger: '.modal-dialog .o_website_dialog input:eq(1)',\n        extra_trigger: '.modal-dialog .o_website_dialog input.is-invalid',\n        run: 'text #',\n    },\n    {\n        content: \"Confirm the new menu entry\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"Save the website menu with the new entry\",\n        trigger: '.modal-footer .btn-primary',\n        extra_trigger: '.oe_menu_editor .js_menu_label:contains(\"Random!\")',\n    },\n    // Edit the new menu item from the \"edit link\" popover button\n    wTourUtils.clickOnExtraMenuItem({extra_trigger: '#oe_snippets.o_loaded'}, true),\n    {\n        content: \"Menu should have a new link item\",\n        trigger: 'iframe #top_menu .nav-item a:contains(\"Random!\")',\n    },\n    {\n        content: \"Click on Edit Link\",\n        trigger: 'iframe .o_edit_menu_popover a.o_we_edit_link',\n    },\n    {\n        content: \"Change the label\",\n        trigger: '.modal-dialog .o_website_dialog input:eq(0)',\n        run: 'text Modnar',\n    },\n    {\n        content: \"Confirm the new label\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    ...wTourUtils.clickOnSave(),\n    wTourUtils.clickOnExtraMenuItem({extra_trigger: 'iframe body:not(.editor_enable)'}, true),\n    {\n        content: \"Label should have changed\",\n        extra_trigger: \"iframe body:not(.editor_enable)\",\n        trigger: 'iframe #top_menu .nav-item a:contains(\"Modnar\")',\n        run: () => {}, // it's a check\n    },\n    // Edit the menu item from the \"edit menu\" popover button\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"Click on the 'Modnar' link\",\n        extra_trigger: \"#oe_snippets.o_loaded\",\n        trigger: 'iframe #top_menu .nav-item a:contains(\"Modnar\")',\n    },\n    {\n        content: \"Click on the popover Edit Menu button\",\n        trigger: 'iframe .o_edit_menu_popover a.js_edit_menu',\n    },\n    {\n        content: \"Click on the dialog Edit Menu button\",\n        trigger: '.oe_menu_editor .js_menu_label:contains(\"Modnar\")',\n        run: function () {\n            const liEl = this.$anchor[0].closest('[data-menu-id]');\n            liEl.querySelector('button.js_edit_menu').click();\n        },\n    },\n    {\n        content: \"Change the label\",\n        trigger: '.modal-dialog .o_website_dialog input:eq(0)',\n        run: 'text Modnar !!',\n    },\n    {\n        content: \"Confirm the new menu label\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"Save the website menu with the new menu label\",\n        trigger: '.modal-footer .btn-primary',\n        extra_trigger: '.oe_menu_editor .js_menu_label:contains(\"Modnar !!\")',\n    },\n    ...wTourUtils.clickOnSave(),\n    wTourUtils.clickOnExtraMenuItem({extra_trigger: 'iframe body:not(.editor_enable)'}, true),\n    {\n        content: \"Label should have changed\",\n        trigger: 'iframe #top_menu .nav-item a:contains(\"Modnar !!\")',\n        run: () => {}, // It's a check.\n    },\n    // Nest menu item from the menu.\n    {\n        content: \"open site menu\",\n        trigger: 'button[data-menu-xmlid=\"website.menu_site\"]',\n    },\n    {\n        content: \"Click on Edit Menu\",\n        trigger: 'a[data-menu-xmlid=\"website.menu_edit_menu\"]',\n    },\n    {\n        content: \"Drag item into parent\",\n        trigger: '.oe_menu_editor li:contains(\"Contact us\") > .ui-sortable-handle',\n        // Menu rows are 38px tall.\n        run: \"drag_move_and_drop [50,38]@.oe_menu_editor li:contains('Home') > .ui-sortable-handle => .oe_menu_editor li:contains('Home') .ui-sortable-placeholder\",\n    },\n    {\n        content: \"Wait for drop\",\n        trigger: '.oe_menu_editor li:contains(\"Home\") ul li:contains(\"Contact us\")',\n        run: () => {}, // It's a check.\n    },\n    {\n        content: \"Save the website menu with new nested menus\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    {\n        content: \"Menu item should have a child\",\n        trigger: 'iframe #top_menu .nav-item a.dropdown-toggle:contains(\"Home\")',\n    },\n    {\n        content: \"When menu item is opened, child item must appear in the shown menu\",\n        trigger: 'iframe #top_menu .nav-item:contains(\"Home\") ul.show li a.dropdown-item:contains(\"Contact us\")[href=\"/contactus\"]',\n        run: () => {}, // It's a check.\n    },\n]);\n", "/** @odoo-module **/\n\nimport tour from \"web_tour.tour\";\n\ntour.register('edit_translated_page_redirect', {\n    test: true,\n    url: '/nl/contactus',\n}, [\n    {\n        content: \"Enter backend\",\n        trigger: 'a.o_frontend_to_backend_edit_btn',\n    },\n    {\n        content: \"Enter edit mode\",\n        extra_trigger: 'iframe main:has([data-for=\"contactus_form\"])',\n        trigger: '.o_edit_website_container > a',\n    },\n    {\n        content: 'check editor dashboard',\n        trigger: '#oe_snippets.o_loaded',\n        run: () => {\n            // After checking the presence of the editor dashboard, we visit a\n            // translated version of the homepage. The homepage is a special\n            // case (there is no trailing slash), so we test it separately.\n            location.href = '/nl';\n        },\n    },\n    {\n        content: \"Enter backend\",\n        trigger: 'a.o_frontend_to_backend_edit_btn',\n    },\n    {\n        content: \"Enter edit mode\",\n        extra_trigger: 'iframe #wrapwrap',\n        trigger: '.o_edit_website_container > a',\n    },\n    {\n        content: 'check editor dashboard',\n        trigger: '#oe_snippets.o_loaded',\n        run: () => {},\n    },\n]);\n", "odoo.define('website.tour.focus_blur_snippets', function (require) {\n'use strict';\n\nconst { loadJS } = require('@web/core/assets');\nconst tour = require('web_tour.tour');\n\nconst blockIDToData = {\n    parent: {\n        selector: 'iframe .s_focusblur',\n        name: 'section',\n        overlayIndex: 2,\n    },\n    child1: {\n        selector: 'iframe .s_focusblur_child1',\n        name: 'first child',\n        overlayIndex: 1,\n    },\n    child2: {\n        selector: 'iframe .s_focusblur_child2',\n        name: 'second child',\n        overlayIndex: 0,\n    },\n};\n\nfunction clickAndCheck(blockID, expected) {\n    const blockData = blockIDToData[blockID] || {};\n\n    return [{\n        content: blockID ? `Enable the ${blockData.name}` : 'Disable all blocks',\n        trigger: blockData.selector || 'iframe #wrapwrap',\n    }, {\n        content: 'Once the related overlays are enabled/disabled, check that the focus/blur calls have been correct.',\n        trigger: blockID\n            ? `iframe .oe_overlay.ui-draggable:eq(${blockData.overlayIndex}).oe_active`\n            : `iframe #oe_manipulators:not(:has(.oe_active))`,\n        run: function (actions) {\n            const result = window.focusBlurSnippetsResult;\n            window.focusBlurSnippetsResult = [];\n\n            if (expected.length !== result.length\n                    || !expected.every((item, i) => item === result[i])) {\n                console.error(`\n                    Expected: ${expected.toString()}\n                    Result: ${result.toString()}\n                `);\n            }\n        },\n    }];\n}\n\nwindow.focusBlurSnippetsResult = [];\n\ntour.register('focus_blur_snippets', {\n    test: true,\n    url: '/?enable_editor=1',\n}, [\n    {\n        content: 'First load our custom JS options',\n        trigger: '#oe_snippets.o_loaded',\n        run: function () {\n            loadJS('/website/static/tests/tour_utils/focus_blur_snippets_options.js').then(function () {\n                $('iframe:not(.o_ignore_in_tour)').contents().find('body').addClass('focus_blur_snippets_options_loaded');\n            });\n        },\n    },\n    {\n        content: 'Drag the custom block into the page',\n        trigger: '#snippet_structure .oe_snippet:has(.oe_snippet_body.s_focusblur) .oe_snippet_thumbnail',\n        extra_trigger: 'iframe body.focus_blur_snippets_options_loaded',\n        run: 'drag_and_drop iframe #wrap',\n    },\n    ...clickAndCheck('parent', ['focus parent']),\n    ...clickAndCheck(null, ['blur parent']),\n    ...clickAndCheck('child1', ['focus parent', 'focus child1']),\n    ...clickAndCheck('child1', []),\n    ...clickAndCheck(null, ['blur parent', 'blur child1']),\n    ...clickAndCheck('parent', ['focus parent']),\n    ...clickAndCheck('child1', ['blur parent', 'focus parent', 'focus child1']),\n    ...clickAndCheck('child2', ['blur parent', 'blur child1', 'focus parent', 'focus child2']),\n    ...clickAndCheck('parent', ['blur parent', 'blur child2', 'focus parent']),\n]);\n});\n", "/** @odoo-module **/\nimport wTourUtils from 'website.tour_utils';\n\nfunction waitForCSSReload() {\n    return [\n        {\n            // This step is here because the option is applied but triggers a\n            // reloading of the CC value, so if the second value is sent too\n            // soon, it will be ignored. Clicking on the snippet tab and back\n            // will ensure that the mutex is cleared, and therefore we can apply\n            // the saturation step.\n            content: \"Click on the blocks tab and back on theme to ensure the changes are applied\",\n            trigger: '.o_we_add_snippet_btn',\n        },\n        {\n            content: \"Go back to theme options\",\n            trigger: '.o_we_customize_theme_btn',\n            extra_trigger: '#o_scroll',\n        },\n    ];\n}\n\nwTourUtils.registerWebsitePreviewTour('website_gray_color_palette', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    {\n        content: \"Go to theme options\",\n        trigger: '.o_we_customize_theme_btn',\n        extra_trigger: '#oe_snippets.o_loaded',\n    },\n    {\n        content: \"Toggle gray color palette\",\n        trigger: '.o_we_gray_preview.o_we_collapse_toggler',\n    },\n    {\n        content: \"Drag the hue slider\",\n        trigger: '.o_we_slider_tint[data-param=\"gray-hue\"]',\n        run: () => {\n            const slider = document.querySelector('.o_we_slider_tint[data-param=\"gray-hue\"] input');\n            slider.value = 100;\n            slider.dispatchEvent(new InputEvent('change', {bubbles: true}));\n        },\n    },\n    {\n        content: \"Check the preview of the gray 900 after hue change\",\n        trigger: '[variable=\"900\"][style=\"background-color: rgb(36, 41, 33) !important;\"]',\n        run: () => {}, // This is a check.\n    },\n    ...waitForCSSReload(),\n    {\n        content: \"Drag the saturation slider\",\n        trigger: '.o_we_user_value_widget[data-param=\"gray-extra-saturation\"]',\n        extra_trigger: ':not(:has(.o_we_ui_loading))',\n        run: () => {\n            const slider = document.querySelector('.o_we_user_value_widget[data-param=\"gray-extra-saturation\"] input');\n            slider.value = 15;\n            slider.dispatchEvent(new InputEvent('change', {bubbles: true}));\n        }\n    },\n    {\n        content: \"Check the preview of the gray 900 after saturation change\",\n        trigger: '[variable=\"900\"][style=\"background-color: rgb(34, 47, 27) !important;\"]',\n        run: () => {}, // This is a check.\n    },\n    ...waitForCSSReload(),\n    {\n        content: \"Wait for the iframe to be loaded\",\n        trigger: 'iframe body',\n        run: () => {\n            const iframeEl = document.querySelector('.o_website_preview .o_iframe');\n            const styles = iframeEl.contentWindow.getComputedStyle(iframeEl.contentDocument.documentElement);\n            if (styles.getPropertyValue('--900').toString().replace(/ /g, '') !== '#222F1B') {\n                console.error('The value for the gray 900 is not right');\n            }\n        }\n    },\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('website_replace_grid_image', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.dragNDrop({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    wTourUtils.clickOnSnippet({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    {\n        content: \"Toggle to grid mode\",\n        trigger: '.o_we_user_value_widget[data-name=\"grid_mode\"]',\n    },\n    {\n        content: \"Replace image\",\n        trigger: 'iframe .s_text_image img',\n        run: 'dblclick',\n    },\n    {\n        content: \"Pick new image\",\n        trigger: '.o_select_media_dialog img[title=\"s_banner_default_image.jpg\"]',\n    },\n    {\n        content: \"Add new image column\",\n        trigger: '.o_we_user_value_widget[data-add-element=\"image\"]',\n    },\n    {\n        content: \"Replace new image\",\n        trigger: 'iframe .s_text_image img[src=\"/web/image/website.s_text_image_default_image\"]',\n        run: 'dblclick',\n    },\n    {\n        content: \"Pick new image\",\n        trigger: '.o_select_media_dialog img[title=\"s_banner_default_image.jpg\"]',\n    },\n    ...wTourUtils.clickOnSave()\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from \"website.tour_utils\";\n\nwTourUtils.registerWebsitePreviewTour('homepage_edit_discard', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [{\n    trigger: \"#oe_snippets button[data-action=\\\"cancel\\\"]:not([disabled])\",\n    extra_trigger: \"body:not(:has(.o_dialog))\",\n    content: \"<b>Click Discard</b> to Discard all Changes.\",\n    position: \"bottom\",\n}, {\n    trigger: \"iframe body:not(.editor_enable)\",\n    auto: true,\n    run: () => null,\n}]);\n", "/* global ace */\nodoo.define('website.test.html_editor', function (require) {\n'use strict';\n\nconst wTourUtils = require('website.tour_utils');\n\nconst adminCssModif = '#wrap {display: none;}';\nconst demoCssModif = '// demo_edition';\n\nwTourUtils.registerWebsitePreviewTour('html_editor_multiple_templates', {\n    url: '/generic',\n    edition: true,\n    test: true,\n},\n    [\n        {\n            content: \"drop a snippet\",\n            trigger: '#oe_snippets.o_loaded .oe_snippet:has(.s_cover) .oe_snippet_thumbnail',\n            // id starting by 'oe_structure..' will actually create an inherited view\n            run: \"drag_and_drop iframe #oe_structure_test_ui\",\n        },\n        ...wTourUtils.clickOnSave(),\n        // 2. Edit generic view\n        {\n            content: \"open site menu\",\n            extra_trigger: \"iframe body:not(.editor_enable)\",\n            trigger: 'button[data-menu-xmlid=\"website.menu_site\"]',\n        },\n        {\n            content: \"open html editor\",\n            trigger: 'a[data-menu-xmlid=\"website.menu_ace_editor\"]',\n        },\n        {\n            content: \"add something in the generic view\",\n            trigger: 'div.ace_line .ace_xml:contains(\"Generic\")',\n            run: function () {\n                ace.edit('ace-view-editor').getSession().insert({row: 3, column: 1}, '<p>somenewcontent</p>\\n');\n            },\n        },\n        // 3. Edit oe_structure specific view\n        {\n            content: \"select oe_structure specific view\",\n            trigger: 'div.ace_line .ace_xml:contains(\"somenewcontent\")',\n            run: function () {\n                var viewId = $('#ace-view-list option:contains(\"oe_structure_test_ui\")').val();\n                $('#ace-view-list').val(viewId).trigger('change');\n            },\n        },\n        {\n            content: \"add something in the oe_structure specific view\",\n            extra_trigger: '#ace-view-id:contains(\"test.generic_view_oe_structure_test_ui\")', // If no xml_id it should show key\n            trigger: 'div.ace_line .ace_xml:contains(\"s_cover\")',\n            run: function () {\n                ace.edit('ace-view-editor').getSession().insert({row: 2, column: 1}, '<p>anothernewcontent</p>\\n');\n            },\n        },\n        {\n            content: \"save the html editor\",\n            extra_trigger: 'div.ace_line .ace_xml:contains(\"anothernewcontent\")',\n            trigger: \".o_ace_view_editor button[data-action=save]\",\n        },\n        {\n           content: \"check that the page has both modification\",\n           extra_trigger: 'iframe #wrapwrap:contains(\"anothernewcontent\")',\n           trigger: 'iframe #wrapwrap:contains(\"somenewcontent\")',\n           run: function () {}, // it's a check\n       },\n    ]\n);\n\nwTourUtils.registerWebsitePreviewTour('test_html_editor_scss', {\n    url: '/contactus',\n    test: true,\n},\n    [\n        // 1. Open Html Editor and select a scss file\n        {\n            content: \"open site menu\",\n            extra_trigger: 'iframe #wrap:visible', // ensure state for later\n            trigger: 'button[data-menu-xmlid=\"website.menu_site\"]',\n        },\n        {\n            content: \"open html editor\",\n            trigger: 'a[data-menu-xmlid=\"website.menu_ace_editor\"]',\n        },\n        {\n            content: \"open type switcher\",\n            trigger: '.o_ace_type_switcher button',\n        },\n        {\n            content: \"select scss files\",\n            trigger: '.o_ace_type_switcher_choice[data-type=\"scss\"]',\n        },\n        {\n            content: \"select 'user_custom_rules'\",\n            trigger: 'body:has(#ace-scss-list option:contains(\"user_custom_rules\"))',\n            run: function () {\n                var scssId = $('#ace-scss-list option:contains(\"user_custom_rules\")').val();\n                $('#ace-scss-list').val(scssId).trigger('change');\n            },\n        },\n        // 2. Edit that file and ensure it was saved then reset it\n        {\n            content: \"add some scss content in the file\",\n            trigger: 'div.ace_line .ace_comment:contains(\"footer {\")',\n            run: function () {\n                ace.edit('ace-view-editor').getSession().insert({row: 2, column: 0}, `${adminCssModif}\\n`);\n            },\n        },\n        {\n            content: \"save the html editor\",\n            extra_trigger: `div.ace_line:contains(\"${adminCssModif}\")`,\n            trigger: \".o_ace_view_editor button[data-action=save]\",\n        },\n         {\n            content: \"check that the scss modification got applied\",\n            trigger: 'iframe body:has(#wrap:hidden)',\n            run: function () {}, // it's a check\n            timeout: 30000, // SCSS compilation might take some time\n        },\n        {\n            content: \"reset view (after reload, html editor should have been reopened where it was)\",\n            trigger: '#ace-view-id button[data-action=\"reset\"]:not([disabled])',\n        },\n        {\n            content: \"confirm reset warning\",\n            trigger: '.modal-footer .btn-primary',\n        },\n        {\n            content: \"check that the scss file was reset correctly, wrap content should now be visible again\",\n            trigger: 'iframe #wrap:visible',\n            run: function () {}, // it's a check\n            timeout: 30000, // SCSS compilation might take some time\n        },\n        // 3. Customize again that file (will be used in second part of the test\n        //    to ensure restricted user can still use the HTML Editor)\n        {\n            content: \"add some scss content in the file\",\n            trigger: 'div.ace_line .ace_comment:contains(\"footer {\")',\n            run: function () {\n                ace.edit('ace-view-editor').getSession().insert({row: 2, column: 0}, `${adminCssModif}\\n`);\n            },\n        },\n        {\n            content: \"save the html editor\",\n            extra_trigger: `div.ace_line:contains(\"${adminCssModif}\")`,\n            trigger: '.o_ace_view_editor button[data-action=save]',\n        },\n        {\n            content: \"check that the scss modification got applied\",\n            trigger: 'iframe body:has(#wrap:hidden)',\n            run: function () {}, // it's a check\n        },\n    ]\n);\n\nwTourUtils.registerWebsitePreviewTour('test_html_editor_scss_2', {\n    url: '/',\n    test: true,\n},\n    [\n        // This part of the test ensures that a restricted user can still use\n        // the HTML Editor if someone else made a customization previously.\n\n        // 4. Open Html Editor and select a scss file\n        {\n            content: \"open site menu\",\n            trigger: 'button[data-menu-xmlid=\"website.menu_site\"]',\n        },\n        {\n            content: \"open html editor\",\n            trigger: 'a[data-menu-xmlid=\"website.menu_ace_editor\"]',\n        },\n        {\n            content: \"open type switcher\",\n            trigger: '.o_ace_type_switcher button',\n        },\n        {\n            content: \"select scss files\",\n            trigger: '.o_ace_type_switcher_choice[data-type=\"scss\"]',\n        },\n        {\n            content: \"select 'user_custom_rules'\",\n            trigger: 'body:has(#ace-scss-list option:contains(\"user_custom_rules\"))',\n            run: function () {\n                var scssId = $('#ace-scss-list option:contains(\"user_custom_rules\")').val();\n                $('#ace-scss-list').val(scssId).trigger('change');\n            },\n        },\n        // 5. Edit that file and ensure it was saved then reset it\n        {\n            content: \"add some scss content in the file\",\n            trigger: `div.ace_line:contains(\"${adminCssModif}\")`, // ensure the admin modification is here\n            run: function () {\n                ace.edit('ace-view-editor').getSession().insert({row: 2, column: 0}, `${demoCssModif}\\n`);\n            },\n        },\n        {\n            content: \"save the html editor\",\n            extra_trigger: `div.ace_line:contains(\"${demoCssModif}\")`,\n            trigger: \".o_ace_view_editor button[data-action=save]\",\n        },\n        {\n            content: \"reset view (after reload, html editor should have been reopened where it was)\",\n            trigger: '#ace-view-id button[data-action=\"reset\"]:not([disabled])',\n            timeout: 30000, // SCSS compilation might take some time\n        },\n        {\n            content: \"confirm reset warning\",\n            trigger: '.modal-footer .btn-primary',\n        },\n        {\n            content: \"check that the scss file was reset correctly\",\n            extra_trigger: `body:not(:has(div.ace_line:contains(\"${adminCssModif}\")))`,\n            trigger: `body:not(:has(div.ace_line:contains(\"${demoCssModif}\")))`,\n            run: function () {}, // it's a check\n            timeout: 30000, // SCSS compilation might take some time\n        },\n    ]\n);\n\n});\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nconst clickOnImgStep = {\n    content: \"Click somewhere else to save.\",\n    trigger: 'iframe #wrap .s_text_image img',\n};\n\nwTourUtils.registerWebsitePreviewTour('link_tools', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    // 1. Create a new link from scratch.\n    wTourUtils.dragNDrop({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    {\n        content: \"Replace first paragraph, to insert a new link\",\n        trigger: 'iframe #wrap .s_text_image p',\n        run: 'text Go to odoo: '\n    },\n    {\n        content: \"Open link tools\",\n        trigger: \"#toolbar #create-link\",\n    },\n    {\n        content: \"Type the link URL odoo.com\",\n        trigger: '#o_link_dialog_url_input',\n        run: 'text odoo.com'\n    },\n    clickOnImgStep,\n    // 2. Edit the link with the link tools.\n    {\n        content: \"Click on the newly created link, change content to odoo website\",\n        trigger: 'iframe .s_text_image a[href=\"http://odoo.com\"]:contains(\"odoo.com\")',\n        run: 'text odoo website',\n    },\n    {\n        content: \"Link tools, should be open, change the url\",\n        trigger: '#o_link_dialog_url_input',\n        run: 'text odoo.be'\n    },\n\n    clickOnImgStep,\n    ...wTourUtils.clickOnSave(),\n    // 3. Edit a link after saving the page.\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"The new link content should be odoo website and url odoo.be\",\n        extra_trigger: \"#oe_snippets.o_loaded\",\n        trigger: 'iframe .s_text_image a[href=\"http://odoo.be\"]:contains(\"odoo website\")',\n    },\n    {\n        content: \"The new link content should be odoo website and url odoo.be\",\n        trigger: '#toolbar button[data-bs-original-title=\"Link Style\"]',\n    },\n    {\n        // When doing automated testing, the link popover takes time to\n        // hide. While hidding, the editor observer is unactive in order to\n        // prevent the popover mutation to be recorded. In a manual\n        // scenario, the popover has plenty of time to be hidden and the\n        // obsever would be re-activated in time. As this problem arise only\n        // in test, we make sure the popover is hidden\n        trigger: 'iframe html:not(:has(.popover))',\n        run: () => null, // it's a check\n    },\n    {\n        content: \"Click on the secondary style button.\",\n        trigger: '#toolbar we-button[data-value=\"secondary\"]',\n    },\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"The link should have the secondary button style.\",\n        trigger: 'iframe .s_text_image a.btn.btn-secondary[href=\"http://odoo.be\"]:contains(\"odoo website\")',\n        run: () => {}, // It's a check.\n    },\n    // 4. Add link on image.\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"Click on image.\",\n        trigger: 'iframe .s_text_image img',\n        extra_trigger: '#oe_snippets.o_loaded',\n    },\n    {\n        content: \"Activate link.\",\n        trigger: '.o_we_customize_panel we-row:contains(\"Media\") we-button.fa-link',\n    },\n    {\n        content: \"Set URL.\",\n        trigger: '.o_we_customize_panel we-input:contains(\"Your URL\") input',\n        run: 'text odoo.com',\n    },\n    {\n        content: \"Deselect image.\",\n        trigger: 'iframe .s_text_image p',\n    },\n    {\n        content: \"Re-select image.\",\n        trigger: 'iframe .s_text_image img',\n    },\n    {\n        content: \"Check that link tools appear.\",\n        trigger: 'iframe .popover div a:contains(\"http://odoo.com\")',\n        run: () => {}, // It's a check.\n    },\n    // 5. Remove link from image.\n    {\n        content: \"Remove link.\",\n        trigger: 'iframe .popover:contains(\"http://odoo.com\") a .fa-chain-broken',\n    },\n    {\n        content: \"Check that image is not within a link anymore.\",\n        trigger: 'iframe .s_text_image div > img',\n        run: () => {}, // It's a check.\n    },\n]);\n", "/** @odoo-module */\n\nimport tour from 'web_tour.tour';\nimport wTourUtils from 'website.tour_utils';\n\ntour.register('website_media_dialog_undraw', {\n    test: true,\n    url: '/',\n}, [\n{\n    trigger: 'a[data-action=edit]',\n},\nwTourUtils.dragNDrop({\n    id: 's_text_image',\n    name: 'Text - Image',\n}),\n{\n    trigger: '.s_text_image img',\n    run: \"dblclick\",\n},\n{\n    trigger: '.o_select_media_dialog:has(.o_we_search_select option[value=\"media-library\"])',\n},\n]);\n\nwTourUtils.registerWebsitePreviewTour('website_media_dialog_icons', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.dragNDrop({\n        id: 's_process_steps',\n        name: 'Steps',\n    }),\n    {\n        content: \"Open MediaDialog from a snippet icon\",\n        trigger: 'iframe .s_process_steps .fa-unlock-alt',\n        run: \"dblclick\",\n    },\n    {\n        content: \"Pick the same icon\",\n        trigger: '.o_select_media_dialog .o_we_attachment_selected.fa-unlock-alt',\n    },\n    {\n        content: \"Check if the icon remains the same\",\n        trigger: 'iframe .s_process_steps .fa-unlock-alt',\n        run: () => null, // it's a check\n    },\n    {\n        content: \"Open MediaDialog again\",\n        trigger: 'iframe .s_process_steps .fa-unlock-alt',\n        run: \"dblclick\",\n    },\n    {\n        content: \"Click on the ADD button\",\n        trigger: '.o_select_media_dialog .btn:contains(Add)',\n    },\n    {\n        content: \"Check if the icon remains the same\",\n        trigger: 'iframe .s_process_steps .fa-unlock-alt',\n        run: () => null, // it's a check\n    },\n    ...wTourUtils.clickOnSave()\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('website_multi_edition', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    {\n        content: 'Check the current page has not the elements that will be added',\n        trigger: 'iframe body:not(:has(.s_text_image)):not(:has(.s_hr))',\n        run: () => null,\n    },\n    // Edit the main element of the page\n    wTourUtils.dragNDrop({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    // Edit another part in the page, like the footer\n    wTourUtils.dragNDrop({\n        id: 's_hr',\n        name: 'Separator',\n    }),\n    ...wTourUtils.clickOnSave(),\n    {\n        content: 'Check that the main element of the page was properly saved',\n        trigger: 'iframe main .s_text_image',\n        run: () => null,\n    },\n    {\n        content: 'Check that the footer was properly saved',\n        trigger: 'iframe footer .s_hr',\n        run: () => null,\n    },\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\n// TODO: This part should be moved in a QUnit test\nconst checkKanbanGroupBy = [{\n    content: \"Click on Kanban View\",\n    trigger: '.o_cp_switch_buttons .o_kanban',\n}, {\n    content: \"Click on Group By\",\n    extra_trigger: '.o_kanban_renderer',\n    trigger: '.o_search_options .o_group_by_menu button',\n}, {\n    content: \"Click on Add Custom Group\",\n    trigger: '.o_search_options .o_add_custom_group_menu button',\n    run: function (actions) {\n        this.$anchor[0].dispatchEvent(new MouseEvent('mouseenter'));\n    },\n}, {\n    content: \"Click on Apply\", // Active is selected by default\n    trigger: '.o_add_custom_group_menu .dropdown-menu .btn-primary',\n}, {\n    content: \"Click on List View\",\n    extra_trigger: '.o_kanban_renderer .o_kanban_header',\n    trigger: '.o_cp_switch_buttons .o_list',\n}, {\n    content: \"Remove applied Group By\",\n    extra_trigger: '.o_list_renderer',\n    trigger: '.o_cp_searchview .o_facet_remove',\n}];\n\nconst deleteSelectedPage = [\n    {\n        content: \"Click on Action\",\n        trigger: '.o_cp_action_menus button',\n    },\n    {\n        content: \"Click on Delete\",\n        trigger: '.o-dropdown--menu span:contains(\"Delete\")',\n    },\n    {\n        content: \"Click on I am sure about this\",\n        trigger: 'main.modal-body input[type=\"checkbox\"]',\n        // The loading of the dependencies can take a while and\n        // sometimes reach the default 10s timeout\n        timeout: 20000,\n    },\n    {\n        content: \"Click on OK\",\n        trigger: '.modal-content footer button.btn-primary',\n    }\n];\nconst homePage = 'tr:contains(\"Home\")';\n\nwTourUtils.registerWebsitePreviewTour('website_page_manager', {\n    test: true,\n    url: '/',\n}, [\n    {\n        content: \"Click on Site\",\n        trigger: 'button.dropdown-toggle[title=\"Site\"]',\n    },\n    {\n        content: \"Click on Pages\",\n        trigger: 'a.dropdown-item[data-menu-xmlid=\"website.menu_website_pages_list\"]',\n    },\n    ...checkKanbanGroupBy,\n    {\n        content: \"Click on Home Page\",\n        trigger: `.o_list_renderer ${homePage} td.o_list_record_selector input[type=\"checkbox\"]`,\n    },\n    ...deleteSelectedPage,\n    {\n        content: \"Check that the page has been removed\",\n        trigger: `.o_list_renderer:not(:has(${homePage}))`,\n        run: () => null,\n    },\n    {\n        content: \"Click on All Pages\",\n        trigger: '.o_list_renderer thead input[type=\"checkbox\"]',\n    },\n    ...deleteSelectedPage,\n    {\n        content: \"Check that all pages have been removed\",\n        trigger: '.o_list_renderer tbody:not(:has([data-id]))',\n        run: () => null,\n    },\n]);\n", "odoo.define('website.tour.public_user_editor_dep_widget', function (require) {\n'use strict';\n\nconst publicWidget = require('web.public.widget');\nconst wysiwygLoader = require('web_editor.loader');\n\npublicWidget.registry['public_user_editor_test'] = publicWidget.Widget.extend({\n    selector: 'textarea.o_public_user_editor_test_textarea',\n\n    /**\n     * @override\n     */\n    start: async function () {\n        await this._super(...arguments);\n        await wysiwygLoader.loadFromTextarea(this, this.el, {});\n    },\n});\n});\n\nodoo.define('website.tour.public_user_editor', function (require) {\n'use strict';\n\nconst tour = require('web_tour.tour');\n\ntour.register('public_user_editor', {\n    test: true,\n}, [{\n    trigger: '.note-editable',\n    run: function () {}, // Simple check\n}]);\n});\n", "odoo.define('website.tour_reset_password', function (require) {\n'use strict';\n\nvar tour = require('web_tour.tour');\nrequire('web.dom_ready');\n\ntour.register('website_reset_password', {\n    test: true,\n}, [\n    {\n        content: \"fill new password\",\n        trigger: '.oe_reset_password_form input[name=\"password\"]',\n        run: \"text adminadmin\"\n    },\n    {\n        content: \"fill confirm password\",\n        trigger: '.oe_reset_password_form input[name=\"confirm_password\"]',\n        run: \"text adminadmin\"\n    },\n    {\n        content: \"submit reset password form\",\n        trigger: '.oe_reset_password_form button[type=\"submit\"]',\n    },\n    {\n        content: \"check that we're logged in\",\n        trigger: '.oe_topbar_name:contains(\"The King\")',\n        run: function () {}\n    },\n]);\n});\n", "odoo.define(\"website.tour.restricted_editor\", function (require) {\n\"use strict\";\n\nvar wTourUtils = require(\"website.tour_utils\");\n\nwTourUtils.registerWebsitePreviewTour(\"restricted_editor\", {\n    test: true,\n    url: \"/\",\n}, [{\n    trigger: '.o_edit_website_container a',\n    content: \"Click \\\"EDIT\\\" button of website as Restricted Editor\",\n}, {\n    trigger: '#oe_snippets.o_loaded',\n    content: \"Check that the snippets loaded properly\",\n}]);\n});\n", "odoo.define('website.tour.rte', function (require) {\n'use strict';\n\nvar session = require('web.session');\nconst wTourUtils = require('website.tour_utils');\n\nvar domReady = new Promise(function (resolve) {\n    $(resolve);\n});\nvar ready = Promise.all([domReady, session.is_bound]);\n\nwTourUtils.registerWebsitePreviewTour('rte_translator', {\n    test: true,\n    url: '/',\n    wait_for: ready,\n}, [{\n    content: \"click language dropdown\",\n    trigger: 'iframe .js_language_selector .dropdown-toggle',\n}, {\n    content: \"click on Add a language\",\n    trigger: 'iframe a.o_add_language',\n}, {\n    content: \"type Parseltongue\",\n    trigger: 'div[name=\"lang_ids\"] .o_input_dropdown input',\n    run: 'text Parseltongue',\n}, {\n    content: 'select Parseltongue',\n    trigger: '.dropdown-item:contains(Parseltongue)',\n}, {\n    content: \"load Parseltongue\",\n    trigger: '.modal-footer .btn-primary',\n    extra_trigger: '.modal-dialog div[name=\"lang_ids\"] .rounded-pill .o_tag_badge_text:contains(Parseltongue)',\n}, {\n    content: \"click language dropdown (2)\",\n    trigger: 'iframe .js_language_selector .dropdown-toggle',\n    timeout: 60000,\n}, {\n    content: \"go to english version\",\n    trigger: 'iframe .js_language_selector a[data-url_code=\"en\"]',\n    extra_trigger: 'iframe html[lang*=\"pa-GB\"]',\n}, {\n    content: \"Open new page menu\",\n    trigger: \".o_menu_systray .o_new_content_container > a\",\n    extra_trigger: 'iframe html[lang*=\"en-US\"]',\n    consumeVisibleOnly: true,\n}, {\n    content: \"click on new page\",\n    trigger: '.o_new_content_element a',\n}, {\n    content: \"insert file name\",\n    trigger: '.modal-dialog input[type=\"text\"]',\n    run: 'text rte_translator.xml',\n}, {\n    content: \"create file\",\n    trigger: '.modal-dialog button.btn-primary',\n    extra_trigger: 'input[type=\"text\"]:propValue(rte_translator.xml)',\n}, {\n    content: \"click on the 'page manager' button\",\n    trigger: 'button[name=\"website.action_website_pages_list\"]',\n}, {\n    content: \"click on the record to display the xml file in the iframe\",\n    trigger: 'td:contains(\"rte_translator.xml\")',\n}, {\n    content: \"Open new page menu\",\n    trigger: \".o_menu_systray .o_new_content_container > a\",\n    consumeVisibleOnly: true,\n}, {\n    content: \"click on new page\",\n    trigger: '.o_new_content_element a',\n}, {\n    content: \"insert page name\",\n    trigger: '.modal-dialog input[type=\"text\"]',\n    run: 'text rte_translator',\n}, {\n    content: \"create page\",\n    trigger: '.modal-dialog button.btn-primary',\n    extra_trigger: 'input[type=\"text\"]:propValue(rte_translator)',\n}, {\n    content: \"drop a snippet\",\n    trigger: \"#snippet_structure .oe_snippet:eq(1) .oe_snippet_thumbnail\",\n    run: 'drag_and_drop iframe #wrap',\n}, {\n    content: \"change content\",\n    trigger: 'iframe #wrap',\n    run: function () {\n        $('iframe:not(.o_ignore_in_tour)').contents().find(\"#wrap p:first\").replaceWith('<p>Write one or <font style=\"background-color: yellow;\">two paragraphs <b>describing</b></font> your product or\\\n                <font style=\"color: rgb(255, 0, 0);\">services</font>. To be successful your content needs to be\\\n                useful to your <a href=\"/999\">readers</a>.</p> <input placeholder=\"test translate placeholder\"/>\\\n                <p>&lt;b&gt;&lt;/b&gt; is an HTML&nbsp;tag &amp; is empty</p>');\n        $('iframe:not(.o_ignore_in_tour)').contents().find(\"#wrap img\").attr(\"title\", \"test translate image title\");\n    }\n}, {\n    content: \"save\",\n    trigger: 'button[data-action=save]',\n    extra_trigger: 'iframe #wrap p:first b',\n}, {\n    content: \"click language dropdown (3)\",\n    trigger: 'iframe .js_language_selector .dropdown-toggle',\n    extra_trigger: 'iframe body:not(.editor_enable)',\n}, {\n    content: \"click on Parseltongue version\",\n    trigger: 'iframe .js_language_selector a[data-url_code=\"pa_GB\"]',\n    extra_trigger: 'iframe html[lang*=\"en\"]',\n}, {\n    content: \"translate\",\n    trigger: '.o_menu_systray .o_translate_website_container > a',\n    extra_trigger: 'iframe html:not(:has(#wrap p span))',\n}, {\n    content: \"close modal\",\n    trigger: '.modal-footer .btn-secondary',\n}, {\n    content: \"check if translation is activate\",\n    trigger: 'iframe [data-oe-translation-initial-sha]',\n}, {\n    content: \"translate text\",\n    extra_trigger: '#oe_snippets.o_loaded',\n    trigger: 'iframe #wrap p font:first',\n    run: function (actionHelper) {\n        actionHelper.text('translated Parseltongue text');\n        const Wysiwyg = odoo.__DEBUG__.services['web_editor.wysiwyg'];\n        Wysiwyg.setRange(this.$anchor.contents()[0], 22);\n        this.$anchor.trigger($.Event(\"keyup\", {key: '_', keyCode: 95}));\n        this.$anchor.trigger('input');\n    },\n}, {\n    content: \"translate text with special char\",\n    trigger: 'iframe #wrap input + p span:first',\n    run: function (actionHelper) {\n        actionHelper.click();\n        this.$anchor.prepend('&lt;{translated}&gt;');\n        const Wysiwyg = odoo.__DEBUG__.services['web_editor.wysiwyg'];\n        Wysiwyg.setRange(this.$anchor.contents()[0], 0);\n        this.$anchor.trigger($.Event(\"keyup\", {key: '_', keyCode: 95}));\n        this.$anchor.trigger('input');\n    },\n}, {\n    content: \"click on input\",\n    trigger: 'iframe #wrap input:first',\n    extra_trigger: 'iframe #wrap .o_dirty font:first:contains(translated Parseltongue text)',\n    run: 'click',\n}, {\n    content: \"translate placeholder\",\n    trigger: '.modal-dialog input:first',\n    run: 'text test Parseltongue placeholder',\n}, {\n    content: \"close modal\",\n    trigger: '.modal-footer .btn-primary',\n    extra_trigger: '.modal input:propValue(test Parseltongue placeholder)',\n}, {\n    content: \"save translation\",\n    trigger: 'button[data-action=save]',\n}, {\n    content: \"check: content is translated\",\n    trigger: 'iframe #wrap p font:first:contains(translated Parseltongue text)',\n    extra_trigger: 'iframe body:not(.editor_enable)',\n    run: function () {}, // it's a check\n}, {\n    content: \"check: content with special char is translated\",\n    trigger: \"iframe #wrap input + p:contains(<{translated}><b></b> is an HTML\\xa0tag & )\",\n    run: function () {}, // it's a check\n\n}, {\n    content: \"check: placeholder translation\",\n    trigger: 'iframe input[placeholder=\"test Parseltongue placeholder\"]',\n    run: function () {}, // it's a check\n\n}, {\n    content: \"open language selector\",\n    trigger: 'iframe .js_language_selector button:first',\n    extra_trigger: 'iframe html[lang*=\"pa-GB\"]:not(:has(#wrap p span))',\n}, {\n    content: \"return to english version\",\n    trigger: 'iframe .js_language_selector a[data-url_code=\"en\"]',\n}, {\n    content: \"edit english version\",\n    trigger: '.o_edit_website_container > a',\n    extra_trigger: 'iframe body:not(:has(#wrap p font:first:containsExact(paragraphs <b>describing</b>)))',\n}, {\n    content: \"select text\",\n    extra_trigger: '#oe_snippets.o_loaded',\n    trigger: 'iframe #wrap p',\n    run: function (actionHelper) {\n        actionHelper.click();\n        var el = this.$anchor[0];\n        var mousedown = document.createEvent('MouseEvents');\n        mousedown.initMouseEvent('mousedown', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, el);\n        el.dispatchEvent(mousedown);\n        var mouseup = document.createEvent('MouseEvents');\n        const Wysiwyg = odoo.__DEBUG__.services['web_editor.wysiwyg'];\n        Wysiwyg.setRange(el.childNodes[2], 6, el.childNodes[2], 13);\n        mouseup.initMouseEvent('mouseup', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, el);\n        el.dispatchEvent(mouseup);\n    },\n// This is disabled for now because it reveals a bug that is fixed in saas-15.1\n// and considered a tradeoff in 15.0. The bug concerns the invalidation of\n// translations when inserting tags with more than one character. Whereas <u>\n// didn't trigger an invalidation, <span style=\"text-decoration-line: underline;\">\n// does.\n// }, {\n//     content: \"underline\",\n//     trigger: '.oe-toolbar #underline',\n}, {\n    content: \"save new change\",\n    trigger: 'button[data-action=save]',\n    // See comment above.\n    // extra_trigger: '#wrap.o_dirty p span[style*=\"text-decoration-line: underline;\"]',\n}, {\n    content: \"click language dropdown (4)\",\n    trigger: 'iframe .js_language_selector .dropdown-toggle',\n    extra_trigger: 'iframe body:not(.editor_enable)',\n}, {\n    content: \"return in Parseltongue\",\n    trigger: 'iframe html[lang=\"en-US\"] .js_language_selector .js_change_lang[data-url_code=\"pa_GB\"]',\n}, {\n    content: \"check bis: content is translated\",\n    trigger: 'iframe #wrap p font:first:contains(translated Parseltongue text)',\n    extra_trigger: 'iframe html[lang*=\"pa-GB\"]',\n}, {\n    content: \"check bis: placeholder translation\",\n    trigger: 'iframe input[placeholder=\"test Parseltongue placeholder\"]',\n}, {\n    content: \"open site menu\",\n    trigger: 'button[data-menu-xmlid=\"website.menu_site\"]',\n}, {\n    content: \"Open HTML editor\",\n    trigger: 'a[data-menu-xmlid=\"website.menu_ace_editor\"]',\n}, {\n    content: \"Check that the editor is not showing translated content (1)\",\n    trigger: '.ace_text-layer .ace_line:contains(\"an HTML\")',\n    run: function (actions) {\n        var lineEscapedText = $(this.$anchor.text()).last().text();\n        if (lineEscapedText !== \"&lt;b&gt;&lt;/b&gt; is an HTML&nbsp;tag &amp; is empty\") {\n            console.error('The HTML editor should display the correct untranslated content');\n            $('iframe:not(.o_ignore_in_tour)').contents().find('body').addClass('rte_translator_error');\n        }\n    },\n}, {\n    content: \"Check that the editor is not showing translated content (2)\",\n    trigger: 'iframe body:not(.rte_translator_error)',\n    run: function () {},\n}]);\n});\n", "/** @odoo-module */\n\nimport weUtils from 'web_editor.utils';\nimport wTourUtils from 'website.tour_utils';\n\nconst snippets = [\n    {\n        id: 's_text_image',\n        name: 'Text - Image',\n    },\n];\nconst gradients = [\n    'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n    'linear-gradient(135deg, rgb(255, 222, 202) 0%, rgb(202, 115, 69) 100%)',\n];\n\nfunction typeToName(xType) {\n    return xType === 'cc' ? 'color combinations' : xType === 'bg' ? 'background colors' : 'gradients';\n}\n\nfunction switchTo(type, _name) {\n    const target = type === 'cc' ? 'color-combinations' : type === 'bg' ? 'custom-colors' : 'gradients';\n    const name = _name || typeToName(type);\n    return {\n        trigger: `.o_we_colorpicker_switch_pane_btn[data-target=\"${target}\"]`,\n        content: `Switch to ${name}`,\n    };\n}\n\nfunction addCheck(steps, checkX, checkNoX, xType, noSwitch = false) {\n    if (!checkX && !checkNoX) {\n        return;\n    }\n\n    const name = typeToName(xType);\n    const selectorCheckX = checkX && `.o_we_color_btn[data-color=\"${checkX}\"].selected`;\n    const selectorCheckNoX = checkNoX && `.o_we_color_btn[data-color=\"${checkNoX}\"]:not(.selected)`;\n    const step = {\n        trigger: selectorCheckX || selectorCheckNoX,\n        content: `The correct ${name} is marked as selected`,\n        position: 'bottom',\n        run: () => null,\n    };\n    if (!selectorCheckX && selectorCheckNoX) {\n        step.extra_trigger = selectorCheckNoX;\n    }\n\n    if (!noSwitch) {\n        steps.push(switchTo(xType, name));\n    }\n    steps.push(step);\n}\n\nfunction checkAndUpdateBackgroundColor({\n    checkCC, checkNoCC,\n    checkBg, checkNoBg,\n    checkGradient, checkNoGradient,\n    changeType, change,\n    finalSelector, finalRun\n}) {\n    const steps = [\n        wTourUtils.changeBackgroundColor(),\n    ];\n\n    addCheck(steps, checkCC, checkNoCC, 'cc', true);\n    addCheck(steps, checkBg, checkNoBg, 'bg');\n    addCheck(steps, checkGradient, checkNoGradient, 'gradient');\n\n    if (changeType) {\n        steps.push(switchTo(changeType));\n        steps.push(wTourUtils.changeOption('ColoredLevelBackground', `.o_we_color_btn[data-color=\"${change}\"]`, 'background color', 'top', true));\n        steps.push({\n            trigger: finalSelector,\n            content: \"The selected colors have been applied (CC AND (BG or GRADIENT))\",\n            position: 'bottom',\n            run: finalRun,\n        });\n    }\n\n    return steps;\n}\n\nfunction updateAndCheckCustomGradient({updateStep, checkGradient}) {\n    const steps = [updateStep, {\n        trigger: `iframe #wrapwrap section.${snippets[0].id}.o_cc1`,\n        content: 'Color combination 1 still selected',\n        run: () => null,\n    }];\n    addCheck(steps, checkGradient, checkGradient !== gradients[0] && gradients[0], 'gradient', true);\n    return steps;\n}\n\nwTourUtils.registerWebsitePreviewTour('snippet_background_edition', {\n    url: '/',\n    edition: true,\n    test: true,\n},\n[\nwTourUtils.dragNDrop(snippets[0]),\nwTourUtils.clickOnSnippet(snippets[0]),\n\n// Add a color combination\n...checkAndUpdateBackgroundColor({\n    changeType: 'cc',\n    change: 3,\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc3:not([class*=bg-]):not([style*=\"background\"])`,\n}),\n\n// Change the color combination + Check the previous one was marked as selected\n...checkAndUpdateBackgroundColor({\n    checkCC: 3,\n    changeType: 'cc',\n    change: 2,\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc2:not(.o_cc3):not([class*=bg-])`,\n}),\n\n// Check the color combination was marked as selected + Edit the bg color\n...checkAndUpdateBackgroundColor({\n    checkCC: 2,\n    checkNoCC: 3,\n    changeType: 'bg',\n    change: 'black-50',\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc2.bg-black-50`,\n}),\n\n// Check the current color palette selection + Change the bg color\n...checkAndUpdateBackgroundColor({\n    checkCC: 2,\n    checkBg: 'black-50',\n    changeType: 'bg',\n    change: '800',\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc2.bg-800:not(.bg-black-50)`,\n}),\n\n// Check the current color palette selection + Change the color combination\n// again. It should keep the bg color class.\n...checkAndUpdateBackgroundColor({\n    checkCC: 2,\n    checkBg: '800',\n    checkNoBg: 'black-50',\n    changeType: 'cc',\n    change: 4,\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc4:not(.o_cc2).bg-800`,\n}),\n\n// Check the current color palette status + Replace the bg color by a gradient\n...checkAndUpdateBackgroundColor({\n    checkCC: 4,\n    checkNoCC: 2,\n    checkBg: '800',\n    changeType: 'gradient',\n    change: gradients[0],\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc4:not(.bg-800)[style*=\"background-image: ${gradients[0]}\"]`,\n}),\n\n// Check the current color palette status + Replace the gradient\n...checkAndUpdateBackgroundColor({\n    checkCC: 4,\n    checkNoBg: '800',\n    checkGradient: gradients[0],\n    changeType: 'gradient',\n    change: gradients[1],\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc4[style*=\"background-image: ${gradients[1]}\"]:not([style*=\"background-image: ${gradients[0]}\"])`,\n}),\n\n// Check the current color palette selection + Change the color combination\n// again. It should keep the gradient.\n...checkAndUpdateBackgroundColor({\n    checkCC: 4,\n    checkGradient: gradients[1],\n    checkNoGradient: gradients[0],\n    changeType: 'cc',\n    change: 1,\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc1:not(.o_cc4)[style*=\"background-image: ${gradients[1]}\"]`,\n}),\n\n// Final check of the color status in the color palette\n...checkAndUpdateBackgroundColor({\n    checkCC: 1,\n    checkNoCC: 4,\n    checkGradient: gradients[1],\n}),\n\n// Now, add an image on top of that color combination + gradient\n{\n    // Close the palette before selecting a media.\n    trigger: '.snippet-option-ColoredLevelBackground we-title',\n    content: 'Close palette',\n},\nwTourUtils.changeOption('ColoredLevelBackground', '[data-name=\"bg_image_toggle_opt\"]'),\n{\n    trigger: '.o_existing_attachment_cell img',\n    content: \"Select an image in the media dialog\",\n},\n{\n    trigger: `iframe .${snippets[0].id}.o_cc.o_cc1`,\n    run: function () {\n        const parts = weUtils.backgroundImageCssToParts(this.$anchor.css('background-image'));\n        if (!parts.url || !parts.url.startsWith('url(')) {\n            console.error('An image should have been added as background.');\n        }\n        if (parts.gradient !== gradients[1]) {\n            console.error('The gradient should have been kept when adding the background image');\n        }\n    },\n},\n\n// Replace the gradient while there is a background-image\n...checkAndUpdateBackgroundColor({\n    checkCC: 1,\n    checkGradient: gradients[1],\n    changeType: 'gradient',\n    change: gradients[0],\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc1:not([style*=\"${gradients[1]}\"])`,\n    finalRun: function () {\n        const parts = weUtils.backgroundImageCssToParts(this.$anchor.css('background-image'));\n        if (!parts.url || !parts.url.startsWith('url(')) {\n            console.error('The image should have been kept when changing the gradient');\n        }\n        if (parts.gradient !== gradients[0]) {\n            console.error('The gradient should have been changed');\n        }\n    },\n}),\n\n// Customize gradient\nwTourUtils.changeBackgroundColor(),\nswitchTo('gradient'),\n// Avoid navigating across tabs to maintain current editor state\n// Step colors\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker .o_custom_gradient_scale',\n        content: 'Add step',\n        run: 'click',\n    },\n    checkGradient: 'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n}),\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker .o_slider_multi input.active',\n        content: 'Move step',\n        run: () => {\n            const slider = $('.colorpicker .o_slider_multi input.active');\n            slider.val(45);\n            slider.trigger('click');\n        },\n    },\n    checkGradient: 'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(203, 94, 238) 45%, rgb(75, 225, 236) 100%)',\n}),\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker .o_color_picker_inputs .o_hex_div input',\n        content: 'Pick step color',\n        run: 'text #FF0000',\n    },\n    checkGradient: 'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(255, 0, 0) 45%, rgb(75, 225, 236) 100%)',\n}),\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker .o_remove_color',\n        content: 'Delete step',\n        run: 'click',\n    },\n    checkGradient: 'linear-gradient(135deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n}),\n// Linear\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker input[data-name=\"angle\"]',\n        content: 'Change angle',\n        run: 'text_blur 50',\n    },\n    checkGradient: 'linear-gradient(50deg, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n}),\n// Radial\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker we-button[data-gradient-type=\"radial-gradient\"]',\n        content: 'Switch to Radial',\n        run: 'click',\n    },\n    checkGradient: 'radial-gradient(circle farthest-side at 25% 25%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n}),\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker input[data-name=\"positionX\"]',\n        content: 'Change X position',\n        run: 'text_blur 33',\n    },\n    checkGradient: 'radial-gradient(circle farthest-side at 33% 25%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n}),\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker input[data-name=\"positionY\"]',\n        content: 'Change Y position',\n        run: 'text_blur 75',\n    },\n    checkGradient: 'radial-gradient(circle farthest-side at 33% 75%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n}),\n...updateAndCheckCustomGradient({\n    updateStep: {\n        trigger: '.colorpicker we-button[data-gradient-size=\"closest-side\"]',\n        content: 'Change color spread size',\n        run: 'click',\n    },\n    checkGradient: 'radial-gradient(circle closest-side at 33% 75%, rgb(203, 94, 238) 0%, rgb(75, 225, 236) 100%)',\n}),\n// Revert to predefined gradient\n{\n    trigger: `.o_we_color_btn[data-color=\"${gradients[0]}\"]`,\n    content: `Revert to predefiend gradient ${gradients[0]}`,\n    run: 'click',\n},\n\n// Replace the gradient by a bg color\n...checkAndUpdateBackgroundColor({\n    checkCC: 1,\n    checkGradient: gradients[0],\n    checkNoGradient: gradients[1],\n    changeType: 'bg',\n    change: 'black-75',\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc1.bg-black-75[style^=\"background-image: url(\"]:not([style*=\"${gradients[0]}\"])`\n}),\n\n// Re-add a gradient\n...checkAndUpdateBackgroundColor({\n    checkCC: 1,\n    checkBg: 'black-75',\n    checkNoGradient: gradients[0],\n    changeType: 'gradient',\n    change: gradients[1],\n    finalSelector: `iframe .${snippets[0].id}.o_cc.o_cc1:not(.bg-black-75)`,\n    finalRun: function () {\n        const parts = weUtils.backgroundImageCssToParts(this.$anchor.css('background-image'));\n        if (!parts.url || !parts.url.startsWith('url(')) {\n            console.error('The image should have been kept when re-adding the gradient');\n        }\n        if (parts.gradient !== gradients[1]) {\n            console.error('The gradient should have been re-added');\n        }\n    },\n}),\n\n// Final check of color selection and removing the image\n...checkAndUpdateBackgroundColor({\n    checkCC: 1,\n    checkNoBg: 'black-75',\n    checkGradient: gradients[1],\n}),\nwTourUtils.changeOption('ColoredLevelBackground', '[data-name=\"bg_image_toggle_opt\"]', 'image toggle', 'top', true),\n{\n    trigger: `iframe .${snippets[0].id}.o_cc.o_cc1[style*=\"background-image: ${gradients[1]}\"]`,\n    run: () => null,\n},\n\n// Now removing all colors via the 'None' button (note: colorpicker still opened)\n{\n    trigger: '.o_colorpicker_reset',\n    content: \"Click on the None button of the color palette\",\n},\n{\n    trigger: `iframe .${snippets[0].id}:not(.o_cc):not(.o_cc1):not([style*=\"background-image\"])`,\n    content: \"All color classes and properties should have been removed\",\n    run: () => null,\n}\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('snippet_cache_across_websites', {\n    edition: true,\n    test: true,\n    url: '/@/'\n}, [\n    {\n        content: \"Check that the custom snippet is displayed\",\n        trigger: '#snippet_custom_body span:contains(\"custom_snippet_test\")',\n        run: () => null,\n    },\n    // There's no need to save, but canceling might or might not show a popup...\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"Click on the website switch to switch to website 2\",\n        trigger: '.o_website_switcher_container button',\n    },\n    {\n        content: \"Switch to website 2\",\n        // Ensure data-website-id exists\n        extra_trigger: 'iframe html[data-website-id=\"1\"]',\n        trigger: '.o_website_switcher_container .dropdown-item:contains(\"My Website 2\")'\n    },\n    {\n        content: \"Wait for the iframe to be loaded\",\n        trigger: 'iframe html:not([data-website-id=\"1\"])',\n        run: () => null,\n    },\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"Check that the custom snippet is not here\",\n        extra_trigger: '#oe_snippets:not(:has(#snippet_custom_body span:contains(\"custom_snippet_test\")))',\n        trigger: '#oe_snippets:has(#snippet_custom.d-none)',\n        run: () => null,\n    },\n]);\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('snippet_countdown', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.dragNDrop({id: 's_countdown', name: 'Countdown'}),\n    wTourUtils.clickOnSnippet({id: 's_countdown', name: 'Countdown'}),\n    wTourUtils.changeOption('countdown', 'we-select:has([data-end-action]) we-toggler', 'end action'),\n    wTourUtils.changeOption('countdown', 'we-button[data-end-action=\"message\"]', 'end action'),\n    wTourUtils.changeOption('countdown', 'we-button.toggle-edit-message', 'message preview'),\n    // The next two steps check that the end message does not disappear when a\n    // widgets_start_request is triggered.\n    {\n        content: \"Hover an option which has a preview\",\n        trigger: '[data-select-class=\"o_half_screen_height\"]',\n        run: function (actions) {\n            this.$anchor.trigger('mouseover');\n            this.$anchor.trigger('mouseenter');\n        },\n    },\n    {\n        content: \"Check that the countdown message is still displayed\",\n        trigger: 'iframe .s_countdown .s_picture',\n        run: () => {\n            // Just a visibility check\n\n            // Also make sure the mouseout and mouseleave are triggered so that\n            // next steps make sense.\n            // TODO the next steps are not actually testing anything without\n            // it and the mouseout and mouseleave make sense but really it\n            // should not be *necessary* to simulate those for the editor flow\n            // to make some sense.\n            const $previousAnchor = $('[data-select-class=\"o_half_screen_height\"]');\n            $previousAnchor.trigger('mouseout');\n            $previousAnchor.trigger('mouseleave');\n        },\n    },\n    // Next, we change the end action to message and no countdown while the edit\n    // message toggle is still activated. It should hide the countdown\n    wTourUtils.changeOption('countdown', 'we-select:has([data-end-action]) we-toggler', 'end action'),\n    wTourUtils.changeOption('countdown', 'we-button[data-end-action=\"message_no_countdown\"]', 'end action'),\n    {\n        content: \"Check that the countdown is not displayed\",\n        trigger: 'iframe .s_countdown:has(.s_countdown_canvas_wrapper:not(:visible))',\n        run: () => null, // Just a visibility check\n    },\n    {\n        content: \"Check that the message is still displayed\",\n        trigger: 'iframe .s_countdown .s_picture',\n        run: () => null, // Just a visibility check\n    },\n]);\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('snippet_editor_panel_options', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\nwTourUtils.dragNDrop({\n    id: 's_text_image',\n    name: 'Text - Image',\n}),\n// Test keeping the text selection when using the width option.\n{\n    content: \"Click on the first paragraph.\",\n    trigger: 'iframe .s_text_image p',\n}, {\n    content: \"The text toolbar should be visible. The paragraph should be selected.\",\n    trigger: '#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',\n    run() {\n        const iframeDocument = document.querySelector('.o_iframe').contentDocument;\n        const pText = iframeDocument.querySelector('.s_text_image p').textContent;\n        const selection = iframeDocument.getSelection().toString();\n        if (pText !== selection) {\n            console.error(\"The paragraph was not correctly selected.\");\n        }\n    },\n}, {\n    content: \"Click on the width option.\",\n    trigger: '[data-select-class=\"o_container_small\"]',\n}, {\n    content: \"The snippet should have the correct class.\",\n    trigger: 'iframe .s_text_image > .o_container_small',\n    run: () => {}, // It's a check.\n}, {\n    content: \"The text toolbar should still be visible, and the text still selected.\",\n    trigger: '#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',\n    run() {\n        const iframeDocument = document.querySelector('.o_iframe').contentDocument;\n        const pText = iframeDocument.querySelector('.s_text_image p').textContent;\n        const selection = iframeDocument.getSelection().toString();\n        if (pText !== selection) {\n            console.error(\"The paragraph text selection was lost.\");\n        }\n    },\n},\n// Test the anchor option.\n{\n    content: \"Click on the anchor option\",\n    trigger: '#oe_snippets .snippet-option-anchor we-button',\n    run() {\n        // The clipboard cannot be accessed from a script.\n        // https://w3c.github.io/editing/docs/execCommand/#dfn-the-copy-command\n        // The execCommand is patched for that step so that ClipboardJS still\n        // sends the 'success' event.\n        const oldExecCommand = document.execCommand;\n        document.execCommand = () => true;\n        this.$anchor[0].click();\n        document.execCommand = oldExecCommand;\n    }\n}, {\n    content: \"Check the copied url from the notification toast\",\n    trigger: '.o_notification_manager .o_notification_content',\n    run() {\n        const { textContent } = this.$anchor[0];\n        const url = textContent.substring(textContent.indexOf('/'));\n\n        // The url should not target the client action\n        if (url.startsWith('/@')) {\n            console.error('The anchor option should target the frontend');\n        }\n\n        const iframeDocument = document.querySelector('.o_iframe').contentDocument;\n        const snippetId = iframeDocument.querySelector('.s_text_image').id;\n        if (!url || url.indexOf(snippetId) < 0) {\n            console.error('The anchor option does not target the correct snippet.');\n        }\n    },\n},\n// Test keeping the text selection when adding columns to a snippet with none.\nwTourUtils.goBackToBlocks(),\nwTourUtils.dragNDrop({\n    id: 's_text_block',\n    name: 'Text',\n}),\n{\n    content: \"Click on the first paragraph.\",\n    trigger: 'iframe .s_text_block p',\n}, {\n    content: \"The text toolbar should be visible. The paragraph should be selected.\",\n    trigger: '#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',\n    run() {\n        const iframeDocument = document.querySelector('.o_iframe').contentDocument;\n        const pText = iframeDocument.querySelector('.s_text_block p').textContent;\n        const selection = iframeDocument.getSelection().toString();\n        if (pText !== selection) {\n            console.error(\"The paragraph was not correctly selected.\");\n        }\n    },\n}, {\n    content: \"Click on the columns option.\",\n    trigger: '.snippet-option-layout_column we-select',\n},\n{\n    content: \"Change the number of columns.\",\n    trigger: '.snippet-option-layout_column [data-select-count=\"3\"]',\n}, {\n    content: \"The snippet should have the correct number of columns.\",\n    trigger: 'iframe .s_text_block .container > .row',\n    run() {\n        if (this.$anchor[0].childElementCount !== 3) {\n            console.error(\"The snippet does not have the correct number of columns\");\n        }\n    },\n}, {\n    content: \"The text toolbar should still be visible, and the text still selected.\",\n    trigger: '#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',\n    run() {\n        const iframeDocument = document.querySelector('.o_iframe').contentDocument;\n        const pText = iframeDocument.querySelector('.s_text_block p').textContent;\n        const selection = iframeDocument.getSelection().toString();\n        if (pText !== selection) {\n            console.error(\"The paragraph text selection was lost.\");\n        }\n    },\n},\n// Test keeping the text selection when removing all columns of a snippet.\n{\n    content: \"Click on the columns option.\",\n    trigger: '.snippet-option-layout_column we-select',\n},\n{\n    content: \"Change the number of columns.\",\n    trigger: '.snippet-option-layout_column [data-select-count=\"0\"]',\n}, {\n    content: \"The snippet should have the correct number of columns.\",\n    trigger: 'iframe .s_text_block .container:not(:has(.row))',\n}, {\n    content: \"The text toolbar should still be visible, and the text still selected.\",\n    trigger: '#oe_snippets .o_we_customize_panel > #o_we_editor_toolbar_container',\n    run() {\n        const iframeDocument = document.querySelector('.o_iframe').contentDocument;\n        const pText = iframeDocument.querySelector('.s_text_block p').textContent;\n        const selection = iframeDocument.getSelection().toString();\n        if (pText !== selection) {\n            console.error(\"The paragraph text selection was lost.\");\n        }\n    },\n}]);\n", "odoo.define(\"website.tour.snippet_empty_parent_autoremove\", function (require) {\n\"use strict\";\n\nconst wTourUtils = require('website.tour_utils');\n\nfunction removeSelectedBlock() {\n    return {\n        content: \"Remove selected block\",\n        trigger: '#oe_snippets we-customizeblock-options:nth-last-child(3) .oe_snippet_remove',\n    };\n}\n\nwTourUtils.registerWebsitePreviewTour('snippet_empty_parent_autoremove', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    // Base case: remove both columns from text - image\n    wTourUtils.dragNDrop({\n        id: 's_text_image',\n        name: 'Text - Image',\n    }),\n    {\n        content: \"Click on second column\",\n        trigger: 'iframe #wrap .s_text_image .row > :nth-child(2)',\n    },\n    removeSelectedBlock(),\n    {\n        content: \"Click on first column\",\n        trigger: 'iframe #wrap .s_text_image .row > :first-child',\n    },\n    removeSelectedBlock(),\n    {\n        content: \"Check that #wrap is empty\",\n        trigger: 'iframe #wrap:empty',\n    },\n\n    // Banner: test that parallax, bg-filter and shape are not treated as content\n    wTourUtils.dragNDrop({\n        id: 's_banner',\n        name: 'Banner',\n    }),\n    wTourUtils.clickOnSnippet({\n        id: 's_banner',\n        name: 'Banner',\n    }),\n    {\n        content: \"Check that parallax is present\",\n        trigger: 'iframe #wrap .s_banner .s_parallax_bg',\n        run: () => null,\n    },\n    wTourUtils.changeOption('ColoredLevelBackground', 'Shape'),\n    {\n        content: \"Check that shape is present\",\n        trigger: 'iframe #wrap .s_banner .o_we_shape',\n        run: () => null,\n    },\n    {\n        content: \"Click on first column\",\n        trigger: 'iframe #wrap .s_banner .row > :first-child',\n    },\n    removeSelectedBlock(),\n    {\n        content: \"Check that #wrap is empty\",\n        trigger: 'iframe #wrap:empty',\n        run: () => null,\n    },\n]);\n});\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('snippet_image_gallery', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.dragNDrop({id: 's_image_gallery', name: 'Images Wall'}),\n    ...wTourUtils.clickOnSave(),\n    {\n        content: 'Click on an image of the Image Wall',\n        trigger: 'iframe .s_image_gallery img',\n        run: 'click',\n    },\n    {\n        content: 'Check that the modal has opened properly',\n        trigger: 'iframe .s_gallery_lightbox img',\n        run: () => {}, // This is a check.\n    },\n]);\n\nwTourUtils.registerWebsitePreviewTour(\"snippet_image_gallery_remove\", {\n    test: true,\n    url: \"/\",\n}, [\n    wTourUtils.clickOnEdit(),\n    wTourUtils.dragNDrop({\n        id: \"s_image_gallery\",\n        name: \"Image Gallery\",\n}), wTourUtils.clickOnSnippet({\n    id: 's_image_gallery',\n    name: 'Image Gallery',\n}), {\n    content: \"Click on Remove all\",\n    trigger: \"we-button:has(div:contains('Remove all'))\",\n}, {\n    content: \"Click on Add Images\",\n    trigger: \"iframe span:contains('Add Images')\",\n}, {\n    content: \"Click on the first new image\",\n    trigger: \".o_select_media_dialog img[title='s_default_image.jpg']\",\n}, {\n    content: \"Click on the second new image\",\n    trigger: \".o_select_media_dialog img[title='s_default_image2.jpg']\",\n},\n    wTourUtils.addMedia(),\n   {\n    content: \"Click on the image of the Image Gallery snippet\",\n    trigger: \"iframe .s_image_gallery .carousel-item.active  img\",\n}, {\n    content: \"Check that the Snippet Editor of the clicked image has been loaded\",\n    trigger: \"we-customizeblock-options span:contains('Image'):not(:contains('Image Gallery'))\",\n    run: () => null,\n}, {\n    content: \"Click on Remove Block\",\n    trigger: \".o_we_customize_panel we-title:has(span:contains('Image Gallery')) we-button[title='Remove Block']\",\n}, {\n    content: \"Check that the Image Gallery snippet has been removed\",\n    trigger: \"iframe #wrap:not(:has(.s_image_gallery))\",\n    run: () => null,\n}]);\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('snippet_popup_add_remove', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [{\n    content: 'Drop s_popup snippet',\n    trigger: '#oe_snippets.o_loaded .oe_snippet:has( > [data-snippet=\"s_popup\"]) .oe_snippet_thumbnail',\n    run: \"drag_and_drop iframe #wrap\",\n}, {\n    content: 'Edit s_popup snippet',\n    in_modal: false,\n    trigger: 'iframe #wrap.o_editable [data-snippet=\"s_popup\"] .row > div', // Click deep in the snippet structure\n}, {\n    content: 'Check s_popup setting are loaded, wait panel is visible',\n    in_modal: false,\n    trigger: '.o_we_customize_panel',\n    run: () => null,\n}, {\n    content: `Remove the s_popup snippet`,\n    in_modal: false,\n    trigger: '.o_we_customize_panel we-customizeblock-options:contains(\"Popup\") we-button.oe_snippet_remove:first',\n}, {\n    content: 'Check the s_popup was removed',\n    in_modal: false,\n    trigger: 'iframe #wrap.o_editable:not(:has([data-snippet=\"s_popup\"]))',\n    run: () => null,\n},\n// Test that undoing dropping the snippet removes the invisible elements panel.\n{\n    content: \"Drop the snippet again.\",\n    trigger: '#oe_snippets .oe_snippet:has(> [data-snippet=\"s_popup\"]) .oe_snippet_thumbnail',\n    run: \"drag_and_drop iframe #wrap\",\n}, {\n    content: \"The popup should be in the invisible elements panel.\",\n    in_modal: false,\n    trigger: '.o_we_invisible_el_panel .o_we_invisible_entry',\n    run: () => null, // It's a check.\n}, {\n    content: \"Click on the 'undo' button.\",\n    in_modal: false,\n    trigger: '#oe_snippets button[data-action=\"undo\"]',\n}, {\n    content: \"Check that the s_popup was removed.\",\n    in_modal: false,\n    trigger: 'iframe #wrap.o_editable:not(:has([data-snippet=\"s_popup\"]))',\n    run: () => null, // It's a check.\n}, {\n    content: \"The invisible elements panel should also be removed.\",\n    trigger: '#oe_snippets:has(.o_we_invisible_el_panel.d-none)',\n    run: () => null, // It's a check.\n}]);\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\n// TODO: Remove following steps once fix of task-3212519 is done.\n// Those steps are preventing a race condition to happen in the meantime: when\n// the tour was clicking on the toggle to hide facebook in the next step, it\n// would actually \"ignore\" the result of the click on the toggle and would just\n// consider the action of focusing out the input.\nconst socialRaceConditionClass = 'social_media_race_condition';\nconst preventRaceConditionStep = [{\n    content: \"Wait a few ms to avoid race condition\",\n    // Ensure the class is remove from previous call of those steps\n    extra_trigger: `body:not(.${socialRaceConditionClass})`,\n    trigger: 'iframe .s_social_media',\n    run() {\n        setTimeout(() => {\n            document.body.classList.add(socialRaceConditionClass);\n        }, 500);\n    }\n}, {\n    content: \"Check the race condition class is added after a few ms\",\n    trigger: `body.${socialRaceConditionClass}`,\n    run() {\n        document.body.classList.remove(socialRaceConditionClass);\n    }\n}];\n\nconst addNewSocialNetwork = function (optionIndex, linkIndex, url) {\n    return [{\n        content: \"Click on Add New Social Network\",\n        trigger: 'we-list we-button.o_we_list_add_optional',\n    },\n    {\n        content: \"Ensure new option is found\",\n        trigger: `we-list table input:eq(${optionIndex})[data-list-position=${optionIndex}][data-dom-position=${linkIndex}][data-undeletable=false]`,\n        run: () => {}, // This is a check.\n    },\n    {\n        content: \"Ensure new link is found\",\n        trigger: `iframe .s_social_media:has(a:eq(${linkIndex})[href='https://www.example.com'])`,\n        run: () => {}, // This is a check.\n    },\n    {\n        content: \"Change added Option label\",\n        trigger: `we-list table input:eq(${optionIndex})`,\n        run: `text ${url}`,\n    },\n    {\n        content: \"Ensure new link is changed\",\n        trigger: `iframe .s_social_media:has(a:eq(${linkIndex})[href='${url}'])`,\n        run: () => {}, // This is a check.\n    },\n    ...preventRaceConditionStep,\n    ];\n};\n\nwTourUtils.registerWebsitePreviewTour('snippet_social_media', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.dragNDrop({id: 's_social_media', name: 'Social Media'}),\n    wTourUtils.clickOnSnippet({id: 's_social_media', name: 'Social Media'}),\n    ...addNewSocialNetwork(6, 6, 'https://www.youtu.be/y7TlnAv6cto'),\n    {\n        content: 'Click on the toggle to hide Facebook',\n        trigger: 'we-list table we-button.o_we_user_value_widget',\n        run: 'click',\n    },\n    {\n        content: \"Ensure twitter became first\",\n        trigger: 'iframe .s_social_media:has(a:eq(0)[href=\"/website/social/twitter\"])',\n        run: () => {}, // This is a check.\n    },\n    {\n        content: 'Drag the facebook link at the end of the list',\n        trigger: 'we-list table we-button.o_we_drag_handle',\n        position: 'bottom',\n        run: \"drag_and_drop we-list table tr:last-child\",\n    },\n    {\n        content: 'Check drop completed',\n        trigger: 'we-list table input:eq(6)[data-media=\"facebook\"]',\n        run: () => {}, // This is a check.\n    },\n    ...preventRaceConditionStep,\n    // Create a Link for which we don't have an icon to propose.\n    ...addNewSocialNetwork(7, 6, 'https://whatever.it/1EdSw9X'),\n    // Create a custom instagram link.\n    ...addNewSocialNetwork(8, 7, 'https://instagr.am/odoo.official/'),\n    {\n        content: \"Check if the result is correct before removing\",\n        trigger: \"iframe .s_social_media\" +\n                 \":has(a:eq(0)[href='/website/social/twitter'])\" +\n                 \":has(a:eq(1)[href='/website/social/linkedin'])\" +\n                 \":has(a:eq(2)[href='/website/social/youtube'])\" +\n                 \":has(a:eq(3)[href='/website/social/instagram'])\" +\n                 \":has(a:eq(4)[href='/website/social/github'])\" +\n                 \":has(a:eq(5)[href='https://www.youtu.be/y7TlnAv6cto']:has(i.fa-youtube))\" +\n                 \":has(a:eq(6)[href='https://whatever.it/1EdSw9X']:has(i.fa-pencil))\" +\n                 \":has(a:eq(7)[href='https://instagr.am/odoo.official/']:has(i.fa-instagram))\",\n        run: () => {}, // This is a check.\n    },\n    // Create a custom link, not officially supported, ensure icon is found.\n    {\n        content: 'Change custom social to unsupported link',\n        trigger: 'we-list table input:eq(5)',\n        run: 'text https://www.paypal.com/abc',\n    },\n    {\n        content: \"Ensure paypal icon is found\",\n        trigger: \"iframe .s_social_media\" +\n                 \":has(a:eq(5)[href='https://www.paypal.com/abc']:has(i.fa-paypal))\",\n        run: () => {}, // This is a check.\n    },\n    ...preventRaceConditionStep,\n    {\n        content: 'Delete the custom link',\n        trigger: 'we-list we-button.o_we_select_remove_option',\n        run: 'click',\n    },\n    {\n        content: \"Ensure custom link was removed\",\n        trigger: 'iframe .s_social_media:has(a:eq(5)[href=\"https://whatever.it/1EdSw9X\"]:has(i.fa-pencil))',\n        run: () => {}, // This is a check.\n    },\n    {\n        content: 'Click on the toggle to show Facebook',\n        trigger: 'we-list table we-button.o_we_user_value_widget:not(.active)',\n        run: 'click',\n    },\n    {\n        content: \"Check if the result is correct after removing\",\n        trigger: \"iframe .s_social_media\" +\n                 \":has(a:eq(0)[href='/website/social/twitter'])\" +\n                 \":has(a:eq(1)[href='/website/social/linkedin'])\" +\n                 \":has(a:eq(2)[href='/website/social/youtube'])\" +\n                 \":has(a:eq(3)[href='/website/social/instagram'])\" +\n                 \":has(a:eq(4)[href='/website/social/github'])\" +\n                 \":has(a:eq(5)[href='/website/social/facebook'])\" +\n                 \":has(a:eq(6)[href='https://whatever.it/1EdSw9X']:has(i.fa-pencil))\" +\n                 \":has(a:eq(7)[href='https://instagr.am/odoo.official/']:has(i.fa-instagram))\",\n        run: () => {}, // This is a check.\n    },\n    {\n        content: 'Change url of the DB instagram link',\n        trigger: 'we-list table input:eq(3)',\n        run: 'text https://instagram.com/odoo.official/',\n    },\n    {\n        content: 'Save',\n        trigger: 'button[data-action=save]',\n        run: 'click',\n    },\n    {\n        content: \"Wait until save's calls are finished\",\n        trigger: \"iframe body:not(.editor_enable)\",\n        run: function () {}, // it's a check\n    }\n]);\n", "/** @odoo-module */\n\nimport wTourUtils from 'website.tour_utils';\n\nconst scrollToHeading = function (position) {\n    return {\n        content: `Scroll to h1 number ${position}`,\n        trigger: `iframe h1:eq(${position})`,\n        run: function () {\n            this.$anchor[0].scrollIntoView(true);\n        },\n    };\n};\nconst checkTOCNavBar = function (tocPosition, activeHeaderPosition) {\n    return {\n        content: `Check that the header ${activeHeaderPosition} is active for TOC ${tocPosition}`,\n        trigger: `iframe .s_table_of_content:eq(${tocPosition}) .table_of_content_link:eq(${activeHeaderPosition}).active `,\n        run: () => {}, // This is a check.\n    };\n};\n\nwTourUtils.registerWebsitePreviewTour('snippet_table_of_content', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.dragNDrop({id: 's_table_of_content', name: 'Table of Content'}),\n    wTourUtils.dragNDrop({id: 's_table_of_content', name: 'Table of Content'}),\n    // To make sure that the public widgets of the two previous ones started.\n    wTourUtils.dragNDrop({id: 's_banner', name: 'Banner'}),\n    ...wTourUtils.clickOnSave(),\n    checkTOCNavBar(0, 0),\n    checkTOCNavBar(1, 0),\n    scrollToHeading(1),\n    checkTOCNavBar(0, 1),\n    checkTOCNavBar(1, 0),\n    scrollToHeading(2),\n    checkTOCNavBar(1, 0),\n    scrollToHeading(3),\n    checkTOCNavBar(1, 1),\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"Click on the first TOC's title\",\n        trigger: 'iframe .s_table_of_content:eq(0) h1',\n        extra_trigger: \"#oe_snippets.o_loaded\",\n    },\n    {\n        content: \"Hide the first TOC on mobile\",\n        trigger: '[data-toggle-device-visibility=\"no_mobile\"]',\n    },\n    {\n        content: \"Click on the second TOC's title\",\n        trigger: 'iframe .s_table_of_content:eq(1) h1',\n    },\n    {\n        content: \"Hide the second TOC on desktop\",\n        trigger: '[data-toggle-device-visibility=\"no_desktop\"]',\n    },\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"Check that we have the good TOC on desktop\",\n        trigger: 'iframe .s_table_of_content.o_snippet_mobile_invisible',\n        run: () => {\n            if ($(document.querySelector('iframe .s_table_of_content.o_snippet_desktop_invisible'))\n                    .is(':visible')) {\n                console.error('The mobile TOC should not be visible on desktop');\n            }\n        },\n    },\n    {\n        content: \"Toggle the mobile view\",\n        trigger: '.o_mobile_preview',\n    },\n    {\n        content: \"Check that we have the good TOC on mobile\",\n        trigger: 'iframe .s_table_of_content.o_snippet_desktop_invisible',\n        run: () => {\n            if ($(document.querySelector('iframe .s_table_of_content.o_snippet_mobile_invisible'))\n                    .is(':visible')) {\n                console.error('The desktop TOC should not be visible on mobile');\n            }\n        },\n    },\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('snippet_translation', {\n    url: '/',\n    edition: true,\n    test: true,\n}, [\n    wTourUtils.dragNDrop({name: 'Cover'}),\n    {\n        content: \"Check that contact us contain Parseltongue\",\n        trigger: 'iframe .s_cover .btn-primary:contains(\"Contact us in Parseltongue\")',\n        run: () => null, // it's a check\n    },\n    {\n        content: \"Check that the save button contains 'in fu_GB'\",\n        trigger: '.btn[data-action=\"save\"]:contains(\"Save in fu_GB\")',\n        run: () => null, // it's a check\n    },\n]);\nwTourUtils.registerWebsitePreviewTour('snippet_translation_changing_lang', {\n    url: '/',\n    test: true,\n}, [\n    {\n        content: \"Change language to Parseltongue\",\n        trigger: 'iframe .js_language_selector .btn',\n    },\n    {\n        content: \"Change the language to English\",\n        trigger: 'iframe .js_language_selector .js_change_lang[data-url_code=\"en\"]',\n    },\n    {\n        content: \"Enable translation\",\n        trigger: '.o_translate_website_container a',\n    },\n    {\n        content: \"Close the dialog\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"Click on edit in master\",\n        trigger: '.o_edit_website_container a',\n    },\n    {\n        content: \"Wait for edit mode to start\",\n        trigger: '.o_website_preview.editor_enable.editor_has_snippets',\n        timeout: '30000',\n    },\n    wTourUtils.dragNDrop({name: 'Cover'}),\n    {\n        content: \"Check that contact us contain Parseltongue\",\n        trigger: 'iframe .s_cover .btn-primary:contains(\"Contact us in Parseltongue\")',\n        run: () => null, // it's a check\n    },\n]);\n", "odoo.define(\"website.tour.snippet_version\", function (require) {\n\"use strict\";\n\nconst wTourUtils = require('website.tour_utils');\n\nwTourUtils.registerWebsitePreviewTour(\"snippet_version\", {\n    edition: true,\n    url: \"/\",\n    test: true,\n}, [{\n    content: \"Drop s_test_snip snippet\",\n    trigger: '#oe_snippets .oe_snippet:has(.s_test_snip) .oe_snippet_thumbnail',\n    run: \"drag_and_drop iframe #wrap\",\n}, {\n    content: \"Drop s_text_image snippet\",\n    trigger: '#oe_snippets .oe_snippet:has(.s_text_image) .oe_snippet_thumbnail:not(.o_we_already_dragging)',\n    run: \"drag_and_drop iframe #wrap\",\n}, {\n    content: \"Test t-snippet and t-snippet-call: snippets have data-snippet set\",\n    trigger: '#oe_snippets .o_panel_body > .oe_snippet.ui-draggable',\n    run: function () {\n        // Tests done here as all these are not visible on the page\n        const draggableSnippets = document.querySelectorAll('#oe_snippets .o_panel_body > .oe_snippet.ui-draggable > :nth-child(2)');\n        if (![...draggableSnippets].every(el => el.dataset.snippet)) {\n            console.error(\"error Some t-snippet are missing their template name\");\n        }\n        if (!document.querySelector('#oe_snippets [data-snippet=\"s_test_snip\"] [data-snippet=\"s_share\"]')) {\n            console.error(\"error s_share t-called inside s_test_snip is missing template name\");\n        }\n        if (!document.querySelector('iframe:not(.o_ignore_in_tour)').contentDocument.querySelector('#wrap [data-snippet=\"s_test_snip\"] [data-snippet=\"s_share\"]')) {\n            console.error(\"error Dropped a s_test_snip snippet but missing s_share template name in it\");\n        }\n    },\n},\n    ...wTourUtils.clickOnSave(),\n    wTourUtils.clickOnEdit(),\n{\n    content: \"Modify the version of snippets\",\n    trigger: '#oe_snippets .o_panel_body > .oe_snippet',\n    run: function () {\n        document.querySelector('#oe_snippets .oe_snippet > [data-snippet=\"s_test_snip\"]').dataset.vjs = '999';\n        document.querySelector('#oe_snippets .oe_snippet > [data-snippet=\"s_share\"]').dataset.vcss = '999';\n        document.querySelector('#oe_snippets .oe_snippet > [data-snippet=\"s_text_image\"]').dataset.vxml = '999';\n    },\n}, {\n    content: \"Edit s_test_snip\",\n    trigger: 'iframe #wrap.o_editable .s_test_snip',\n}, {\n    content: \"Edit text_image\",\n    extra_trigger: 'we-customizeblock-options:contains(Test snip) .snippet-option-VersionControl > we-alert',\n    trigger: 'iframe #wrap.o_editable .s_text_image',\n}, {\n    content: \"Edit s_share\",\n    extra_trigger: 'we-customizeblock-options:contains(Text - Image) .snippet-option-VersionControl  > we-alert',\n    trigger: 'iframe #wrap.o_editable .s_share',\n}, {\n    content: \"s_share is outdated\",\n    extra_trigger: 'we-customizeblock-options:contains(Share) .snippet-option-VersionControl > we-alert',\n    trigger: 'iframe body',\n}]);\n});\n", "odoo.define(\"website.tour.snippets_all_drag_and_drop\", async function (require) {\n\"use strict\";\n\nconst { WysiwygAdapterComponent } = require('@website/components/wysiwyg_adapter/wysiwyg_adapter');\nconst websiteTourUtils = require('website.tour_utils');\nconst { patch, unpatch } = require('web.utils');\n\nconst patchWysiwygAdapter = () => patch(WysiwygAdapterComponent.prototype, 'snippets_all_drag_and_drop.wysiwyg_adapter', {\n    _trigger_up(ev) {\n        this._super(...arguments);\n        if (ev.name === 'snippet_removed') {\n            $('body').attr('test-dd-snippet-removed', true);\n        }\n    }\n});\n\nconst unpatchWysiwygAdapter = () => unpatch(WysiwygAdapterComponent.prototype, 'snippets_all_drag_and_drop.wysiwyg_adapter');\n\nconst tour = require(\"web_tour.tour\");\n\nlet snippetsNames = (new URL(document.location.href)).searchParams.get('snippets_names') || '';\n// When this test is loaded in the backend, the search params aren't as easy to\n// read as before. Little trickery to make this test run.\nconst searchParams = new URLSearchParams(window.location.href.split('#')[1]).get('path');\nif (searchParams) {\n    snippetsNames = new URLSearchParams(searchParams.split('/')[1]).get('snippets_names') || '';\n    snippetsNames = snippetsNames.split(',');\n}\nlet steps = [];\nlet n = 0;\nfor (const snippet of snippetsNames) {\n    n++;\n    const snippetSteps = [{\n        content: `Drop ${snippet} snippet [${n}/${snippetsNames.length}]`,\n        trigger: `#oe_snippets .oe_snippet:has( > [data-snippet='${snippet}']) .oe_snippet_thumbnail`,\n        run: \"drag_and_drop iframe #wrap\",\n    }, {\n        content: `Edit ${snippet} snippet`,\n        trigger: `iframe #wrap.o_editable [data-snippet='${snippet}']`,\n    }, {\n        content: `check ${snippet} setting are loaded, wait panel is visible`,\n        trigger: \".o_we_customize_panel\",\n        run: function () {}, // it's a check\n    }, {\n        content: `Remove the ${snippet} snippet`, // Avoid bad perf if many snippets\n        trigger: \"we-button.oe_snippet_remove:last\"\n    }, {\n        content: `click on 'BLOCKS' tab (${snippet})`,\n        extra_trigger: 'body[test-dd-snippet-removed]',\n        trigger: \".o_we_add_snippet_btn\",\n        run: function (actions) {\n            $('body').removeAttr('test-dd-snippet-removed');\n            actions.auto();\n        },\n    }];\n\n    if (snippet === 's_google_map') {\n        snippetSteps.splice(1, 3, {\n            content: 'Close API Key popup',\n            trigger: \"iframe .modal-footer .btn-secondary\",\n        });\n    } else if (['s_popup', 's_newsletter_subscribe_popup'].includes(snippet)) {\n        snippetSteps[2]['in_modal'] = false;\n        snippetSteps.splice(3, 2, {\n            content: `Hide the ${snippet} popup`,\n            trigger: \"iframe .s_popup_close\",\n        }, {\n            content: `Make sure ${snippet} is hidden`,\n            trigger: \"iframe body:not(.modal-open)\",\n        });\n    }\n    steps = steps.concat(snippetSteps);\n}\n\ntour.register(\"snippets_all_drag_and_drop\", {\n    test: true,\n    // To run the tour locally, you need to insert the URL sent by the python\n    // tour here. There is currently an issue with tours which don't have an URL\n    // url: '/?enable_editor=1&snippets_names=s_showcase,s_numbers,s_...',\n}, [\n    websiteTourUtils.clickOnEdit(),\n    {\n        content: \"Ensure snippets are actually passed at the test.\",\n        trigger: \"#oe_snippets.o_loaded\",\n        run: function () {\n            // safety check, otherwise the test might \"break\" one day and\n            // receive no steps. The test would then not test anything anymore\n            // without us noticing it.\n            if (steps.length < 220) {\n                console.error(`This test is not behaving as it should, got only ${steps.length} steps.`);\n            }\n            patchWysiwygAdapter();\n        },\n    },\n    // This first step is needed as it will be used later for inner snippets\n    // Without this, it will dropped inside the footer and will need an extra\n    // selector.\n    {\n        content: \"Drop s_text_image snippet\",\n        trigger: \"#oe_snippets .oe_snippet:has( > [data-snippet='s_text_image']) .oe_snippet_thumbnail\",\n        run: \"drag_and_drop iframe #wrap\"\n    },\n    {\n        content: \"Edit s_text_image snippet\",\n        trigger: \"iframe #wrap.o_editable [data-snippet='s_text_image']\"\n    },\n    {\n        content: \"check setting are loaded, wait panel is visible\",\n        trigger: \".o_we_customize_panel\"\n    },\n    {\n        content: \"click on 'BLOCKS' tab\",\n        trigger: \".o_we_add_snippet_btn\"\n    },\n].concat(steps).concat([\n    {\n        content: \"Remove wysiwyg patch\",\n        trigger: \"body\",\n        run: () => unpatchWysiwygAdapter(),\n    }\n]),\n);\n});\n", "odoo.define('website.tour.specific_website_editor', function (require) {\n'use strict';\n\nconst tour = require('web_tour.tour');\n\ntour.register('generic_website_editor', {\n    test: true,\n}, [{\n    content: 'Click edit button',\n    trigger: '.o_edit_website_container > a',\n},\n{\n    trigger: 'iframe body:not([data-hello=\"world\"])',\n    extra_trigger: '#oe_snippets.o_loaded',\n    content: 'Check that the editor DOM matches its website-generic features',\n    run: function () {}, // Simple check\n}]);\n\ntour.register('specific_website_editor', {\n    test: true,\n}, [{\n    content: 'Click edit button',\n    trigger: '.o_edit_website_container > a',\n},\n{\n    trigger: 'iframe body[data-hello=\"world\"]',\n    extra_trigger: '#oe_snippets.o_loaded',\n    content: 'Check that the editor DOM matches its website-specific features',\n    run: function () {}, // Simple check\n}]);\n});\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nconst countdownSnippet = {\n    name: 'Countdown',\n    id: 's_countdown',\n};\nconst dragNDropOutOfFooter = wTourUtils.dragNDrop(countdownSnippet);\ndragNDropOutOfFooter.run = 'drag_and_drop iframe #wrapwrap #wrap';\n\nwTourUtils.registerWebsitePreviewTour('website_start_cloned_snippet', {\n    edition: true,\n    test: true,\n    url: '/',\n}, [\n    dragNDropOutOfFooter,\n    wTourUtils.clickOnSnippet(countdownSnippet),\n    {\n        content: 'Click on clone snippet',\n        trigger: '.oe_snippet_clone',\n    },\n    {\n        content: 'Check that the cloned snippet has a canvas and that something has been drawn inside of it',\n        trigger: 'iframe .s_countdown:eq(1) canvas',\n        run: function () {\n            // Check that at least one bit has been drawn in the canvas\n            if (!this.$anchor[0].getContext('2d').getImageData(0, 0, 1000, 1000).data.includes(1)) {\n                console.error('The cloned snippet should have been started');\n            }\n        },\n    },\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('translate_menu_name', {\n    url: '/pa_GB',\n    test: true,\n    edition: false,\n}, [\n    {\n        content: \"activate translate mode\",\n        trigger: '.o_translate_website_container a',\n    },\n    {\n        content: \"Close the dialog\",\n        trigger: '.modal-footer .btn-primary',\n    },\n    wTourUtils.clickOnExtraMenuItem({}, true),\n    {\n        content: \"translate the menu entry\",\n        trigger: 'iframe a[href=\"/englishURL\"] span',\n        run: 'text value pa-GB',\n    },\n    ...wTourUtils.clickOnSave(),\n]);\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nconst cover = {\n    id: 's_cover',\n    name: 'Cover',\n};\n\nwTourUtils.registerWebsitePreviewTour('website_click_tour', {\n    test: true,\n    url: '/',\n}, [\n    {\n        content: \"trigger a page navigation\",\n        trigger: 'iframe a[href=\"/contactus\"]',\n    },\n    {\n        content: \"wait for the page to be loaded\",\n        trigger: '.o_website_preview[data-view-xmlid=\"website.contactus\"]',\n        run: () => null, // it's a check\n    },\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"wait for edition to be started\",\n        trigger: 'iframe body.editor_enable',\n        run: () => null, // it's a check\n    },\n    {\n        content: \"click on a link that would trigger navigation\",\n        trigger: 'iframe a[href=\"/\"]',\n    },\n    wTourUtils.goBackToBlocks(),\n    wTourUtils.dragNDrop(cover),\n    wTourUtils.clickOnSnippet(cover),\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"wait for the iframe to be ready\",\n        trigger: 'iframe body:not(.editor_enable)',\n        run: () => null, // it's a check\n    }\n]);\n", "odoo.define('website.tour.form_editor', function (require) {\n    'use strict';\n\n    const wTourUtils = require(\"website.tour_utils\");\n\n    // Visibility possible values:\n    const VISIBLE = 'Always Visible';\n    const HIDDEN = 'Hidden';\n    const CONDITIONALVISIBILITY = 'Visible only if';\n\n    const NB_NON_ESSENTIAL_REQUIRED_FIELDS_IN_DEFAULT_FORM = 2;\n    const ESSENTIAL_FIELDS_VALID_DATA_FOR_DEFAULT_FORM = [\n        {\n            name: 'email_from',\n            value: 'admin@odoo.com',\n        },\n        {\n            name: 'subject',\n            value: 'Hello, world!',\n        }\n    ];\n    const essentialFieldsForDefaultFormFillInSteps = [];\n    for (const data of ESSENTIAL_FIELDS_VALID_DATA_FOR_DEFAULT_FORM) {\n        essentialFieldsForDefaultFormFillInSteps.push({\n            content: \"Enter data in model-required field\",\n            trigger: `iframe .s_website_form_model_required .s_website_form_input[name=\"${data.name}\"]`,\n            run: `text ${data.value}`,\n        });\n    }\n\n    const selectButtonByText = function (text) {\n        return [{\n            content: \"Open the select\",\n            trigger: `we-select:has(we-button:contains(\"${text}\")) we-toggler`,\n        },\n        {\n            content: \"Click on the option\",\n            trigger: `we-select we-button:contains(\"${text}\")`,\n        }];\n    };\n    const selectButtonByData = function (data) {\n        return [{\n            content: \"Open the select\",\n            trigger: `we-select:has(we-button[${data}]) we-toggler`,\n        }, {\n            content: \"Click on the option\",\n            trigger: `we-select we-button[${data}]`,\n        }];\n    };\n    const addField = function (data, name, type, label, required, display = {visibility: VISIBLE, condition: ''}) {\n        const ret = [{\n            content: \"Select form\",\n            extra_trigger: 'iframe .s_website_form_field',\n            trigger: 'iframe section.s_website_form',\n        }, {\n            content: \"Add field\",\n            trigger: 'we-button[data-add-field]',\n        },\n        ...selectButtonByData(data),\n        {\n            content: \"Wait for field to load\",\n            trigger: `iframe .s_website_form_field[data-type=\"${name}\"], .s_website_form_input[name=\"${name}\"]`, //custom or existing field\n            run: function () {},\n        },\n        ...selectButtonByText(display.visibility),\n    ];\n        let testText = 'iframe .s_website_form_field';\n        if (display.condition) {\n            ret.push({\n                content: \"Set the visibility condition\",\n                trigger: 'we-input[data-attribute-name=\"visibilityCondition\"] input',\n                run: `text ${display.condition}`,\n            });\n        }\n        if (required) {\n            testText += '.s_website_form_required';\n            ret.push({\n                content: \"Mark the field as required\",\n                trigger: 'we-button[data-name=\"required_opt\"] we-checkbox',\n            });\n        }\n        if (label) {\n            testText += `:has(label:contains(\"${label}\"))`;\n            ret.push({\n                content: \"Change the label text\",\n                trigger: 'we-input[data-set-label-text] input',\n                run: `text ${label}`,\n            });\n        }\n        if (type !== 'checkbox' && type !== 'radio' && type !== 'select') {\n            let inputType = type === 'textarea' ? type : `input[type=\"${type}\"]`;\n            testText += `:has(${inputType}[name=\"${name}\"]${required ? '[required]' : ''})`;\n        }\n        ret.push({\n            content: \"Check the resulting field\",\n            trigger: testText,\n            run: function () {},\n        });\n        return ret;\n    };\n    const addCustomField = function (name, type, label, required, display) {\n        return addField(`data-custom-field=\"${name}\"`, name, type, label, required, display);\n    };\n    const addExistingField = function (name, type, label, required, display) {\n        return addField(`data-existing-field=\"${name}\"`, name, type, label, required, display);\n    };\n\n    wTourUtils.registerWebsitePreviewTour(\"website_form_editor_tour\", {\n        url: '/',\n        edition: true,\n        test: true,\n    }, [\n        // Drop a form builder snippet and configure it\n        {\n            content: \"Drop the form snippet\",\n            trigger: '#oe_snippets .oe_snippet:has(.s_website_form) .oe_snippet_thumbnail',\n            run: 'drag_and_drop iframe #wrap',\n        }, {\n            content: \"Select form by clicking on an input field\",\n            extra_trigger: 'iframe .s_website_form_field',\n            trigger: 'iframe section.s_website_form input',\n        }, {\n            content: \"Verify that the form editor appeared\",\n            trigger: '.o_we_customize_panel .snippet-option-WebsiteFormEditor',\n            run: () => null,\n        }, {\n            content: \"Go back to blocks to unselect form\",\n            trigger: '.o_we_add_snippet_btn',\n        }, {\n            content: \"Select form by clicking on a text area\",\n            extra_trigger: 'iframe .s_website_form_field',\n            trigger: 'iframe section.s_website_form textarea',\n        }, {\n            content: \"Verify that the form editor appeared\",\n            trigger: '.o_we_customize_panel .snippet-option-WebsiteFormEditor',\n            run: () => null,\n        }, {\n            content: \"Rename the field label\",\n            trigger: 'we-input[data-set-label-text] input',\n            run: \"text Renamed\",\n        }, {\n            content: \"Leave the rename options\",\n            trigger: 'we-input[data-set-label-text] input',\n            run: \"text_blur\",\n        }, {\n            content: \"Go back to blocks to unselect form\",\n            trigger: '.o_we_add_snippet_btn',\n        }, {\n            content: \"Select form itself (not a specific field)\",\n            extra_trigger: 'iframe .s_website_form_field',\n            trigger: 'iframe section.s_website_form',\n        },\n        ...selectButtonByText('Send an E-mail'),\n        {\n            content: \"Form has a model name\",\n            trigger: 'iframe section.s_website_form form[data-model_name=\"mail.mail\"]',\n        }, {\n            content: 'Edit the Phone Number field',\n            trigger: 'iframe input[name=\"phone\"]',\n        }, {\n            content: 'Change the label position of the phone field',\n            trigger: 'we-button[data-select-label-position=\"right\"]',\n        },\n        ...addExistingField('email_cc', 'text', 'Test conditional visibility', false, {visibility: CONDITIONALVISIBILITY, condition: 'odoo'}),\n\n        ...addExistingField('date', 'text', 'Test Date', true),\n\n        ...addExistingField('record_name', 'text', 'Awesome Label', false, {visibility: HIDDEN}),\n\n        ...addExistingField('body_html', 'textarea', 'Your Message', true),\n\n        ...addExistingField('recipient_ids', 'checkbox'),\n\n        ...addCustomField('one2many', 'checkbox', 'Products', true),\n        {\n            content: \"Change Option 1 label\",\n            trigger: 'we-list table input:eq(0)',\n            run: 'text Iphone',\n        }, {\n            content: \"Change Option 2 label\",\n            trigger: 'we-list table input:eq(1)',\n            run: 'text Galaxy S',\n        }, {\n            content: \"Change first Option 3 label\",\n            trigger: 'we-list table input:eq(2)',\n            run: 'text Xperia',\n        }, {\n            content: \"Click on Add new Checkbox\",\n            trigger: 'we-list we-button.o_we_list_add_optional',\n        }, {\n            content: \"Change added Option label\",\n            trigger: 'we-list table input:eq(3)',\n            run: 'text Wiko Stairway',\n        }, {\n            content: \"Check the resulting field\",\n            trigger: \"iframe .s_website_form_field.s_website_form_custom.s_website_form_required\" +\n                        \":has(.s_website_form_multiple[data-display='horizontal'])\" +\n                        \":has(.checkbox:has(label:contains('Iphone')):has(input[type='checkbox'][required]))\" +\n                        \":has(.checkbox:has(label:contains('Galaxy S')):has(input[type='checkbox'][required]))\" +\n                        \":has(.checkbox:has(label:contains('Xperia')):has(input[type='checkbox'][required]))\" +\n                        \":has(.checkbox:has(label:contains('Wiko Stairway')):has(input[type='checkbox'][required]))\",\n            run: function () {},\n        },\n        ...selectButtonByData('data-multi-checkbox-display=\"vertical\"'),\n        {\n            content: \"Check the resulting field\",\n            trigger: \"iframe .s_website_form_field.s_website_form_custom.s_website_form_required\" +\n                        \":has(.s_website_form_multiple[data-display='vertical'])\" +\n                        \":has(.checkbox:has(label:contains('Iphone')):has(input[type='checkbox'][required]))\" +\n                        \":has(.checkbox:has(label:contains('Galaxy S')):has(input[type='checkbox'][required]))\" +\n                        \":has(.checkbox:has(label:contains('Xperia')):has(input[type='checkbox'][required]))\" +\n                        \":has(.checkbox:has(label:contains('Wiko Stairway')):has(input[type='checkbox'][required]))\",\n            run: function () {},\n        },\n\n        ...addCustomField('selection', 'radio', 'Service', true),\n        {\n            content: \"Change Option 1 label\",\n            trigger: 'we-list table input:eq(0)',\n            run: 'text After-sales Service',\n        }, {\n            content: \"Change Option 2 label\",\n            trigger: 'we-list table input:eq(1)',\n            run: 'text Invoicing Service',\n        }, {\n            content: \"Change first Option 3 label\",\n            trigger: 'we-list table input:eq(2)',\n            run: 'text Development Service',\n        }, {\n            content: \"Click on Add new Checkbox\",\n            trigger: 'we-list we-button.o_we_list_add_optional',\n        }, {\n            content: \"Change last Option label\",\n            trigger: 'we-list table input:eq(3)',\n            run: 'text Management Service',\n        }, {\n            content: \"Mark the field as not required\",\n            trigger: 'we-button[data-name=\"required_opt\"] we-checkbox',\n        }, {\n            content: \"Check the resulting field\",\n            trigger: \"iframe .s_website_form_field.s_website_form_custom:not(.s_website_form_required)\" +\n                        \":has(.radio:has(label:contains('After-sales Service')):has(input[type='radio']:not([required])))\" +\n                        \":has(.radio:has(label:contains('Invoicing Service')):has(input[type='radio']:not([required])))\" +\n                        \":has(.radio:has(label:contains('Development Service')):has(input[type='radio']:not([required])))\" +\n                        \":has(.radio:has(label:contains('Management Service')):has(input[type='radio']:not([required])))\",\n            run: function () {},\n        },\n\n        ...addCustomField('many2one', 'select', 'State', true),\n\n        // Customize custom selection field\n        {\n            content: \"Change Option 1 Label\",\n            trigger: 'we-list table input:eq(0)',\n            run: 'text Germany',\n        }, {\n            content: \"Change Option 2 Label\",\n            trigger: 'we-list table input:eq(1)',\n            run: 'text Belgium',\n        }, {\n            content: \"Change first Option 3 label\",\n            trigger: 'we-list table input:eq(2)',\n            run: 'text France',\n        }, {\n            content: \"Click on Add new Checkbox\",\n            trigger: 'we-list we-button.o_we_list_add_optional',\n        }, {\n            content: \"Change last Option label\",\n            trigger: 'we-list table input:eq(3)',\n            run: 'text Canada',\n        }, {\n            content: \"Remove Germany Option\",\n            trigger: '.o_we_select_remove_option:eq(0)',\n        }, {\n            content: \"Click on Add new Checkbox\",\n            trigger: 'we-list we-button.o_we_list_add_optional',\n        }, {\n            content: \"Change last option label with a number\",\n            trigger: 'we-list table input:eq(3)',\n            run: 'text 44 - UK',\n        }, {\n            content: \"Check that the input value is the full option value\",\n            trigger: 'we-list table input:eq(3)',\n            run: () => {\n                const addedOptionEl = document.querySelector('iframe.o_iframe').contentDocument.querySelector('.s_website_form_field select option[value=\"44 - UK\"]');\n                if (!addedOptionEl) {\n                    console.error('The number option was not correctly added');\n                }\n            },\n        }, {\n            content: \"Check the resulting snippet\",\n            trigger: \"iframe .s_website_form_field.s_website_form_custom.s_website_form_required\" +\n                        \":has(label:contains('State'))\" +\n                        \":has(select[required]:hidden)\" +\n                        \":has(.s_website_form_select_item:contains('Belgium'))\" +\n                        \":has(.s_website_form_select_item:contains('France'))\" +\n                        \":has(.s_website_form_select_item:contains('Canada'))\" +\n                        \":has(.s_website_form_select_item:contains('44 - UK'))\" +\n                        \":not(:has(.s_website_form_select_item:contains('Germany')))\",\n            run: function () {},\n        },\n\n        ...addExistingField('attachment_ids', 'file', 'Invoice Scan'),\n\n        {\n            content: \"Insure the history step of the editor is not checking for unbreakable\",\n            trigger: 'iframe #wrapwrap',\n            run: () => {\n                const wysiwyg = $('iframe:not(.o_ignore_in_tour)').contents().find('#wrapwrap').data('wysiwyg');\n                wysiwyg.odooEditor.historyStep(true);\n            },\n        },\n        // Edit the submit button using linkDialog.\n        {\n            content: \"Click submit button to show edit popover\",\n            trigger: 'iframe .s_website_form_send',\n        }, {\n            content: \"Click on Edit Link in Popover\",\n            trigger: 'iframe .o_edit_menu_popover .o_we_edit_link',\n        }, {\n            content: \"Check that no URL field is suggested\",\n            trigger: '#toolbar:has(#url_row:hidden)',\n            run: () => null,\n        }, {\n            content: \"Change button's style\",\n            trigger: '.dropdown-toggle[data-bs-original-title=\"Link Style\"]',\n            run: () => {\n                $('.dropdown-toggle[data-bs-original-title=\"Link Style\"]').click();\n                $('[data-value=\"secondary\"]').click();\n                $('[data-bs-original-title=\"Link Shape\"]').click();\n                $('[data-value=\"rounded-circle\"]').click();\n                $('[data-bs-original-title=\"Link Size\"]').click();\n                $('[data-value=\"sm\"]').click();\n            },\n        }, {\n            content: \"Check the resulting button\",\n            trigger: 'iframe .s_website_form_send.btn.btn-sm.btn-secondary.rounded-circle',\n            run: () => null,\n        },\n        // Add a default value to a auto-fillable field.\n        {\n            content: 'Select the name field',\n            trigger: 'iframe .s_website_form_field:eq(0)',\n        }, {\n            content: 'Set a default value to the name field',\n            trigger: 'we-input[data-attribute-name=\"value\"] input',\n            run: 'text John Smith',\n        },\n        {\n            content: \"Save the page\",\n            trigger: \"button[data-action=save]\",\n        },\n        {\n            content: 'Verify value attribute and property',\n            extra_trigger: 'iframe body:not(.editor_enable)',\n            trigger: 'iframe .s_website_form_field:eq(0) input[value=\"John Smith\"]:propValue(\"Mitchell Admin\")',\n        },\n        {\n            content: 'Verify that phone field is still auto-fillable',\n            trigger: 'iframe .s_website_form_field input[data-fill-with=\"phone\"]:propValue(\"+1 555-555-5555\")',\n        },\n        // Check that if we edit again and save again the default value is not deleted.\n        {\n            content: 'Enter in edit mode again',\n            trigger: '.o_edit_website_container > a',\n            run: 'click',\n        },\n        {\n            content: 'Edit the form',\n            trigger: 'iframe .s_website_form_field:eq(0) input',\n            extra_trigger: 'button[data-action=\"save\"]',\n            run: 'click',\n        },\n        ...addCustomField('many2one', 'select', 'Select Field', true),\n        {\n            content: 'Save the page',\n            trigger: 'button[data-action=save]',\n            run: 'click',\n        },\n        {\n            content: 'Verify that the value has not been deleted',\n            extra_trigger: 'iframe body:not(.editor_enable)',\n            trigger: 'iframe .s_website_form_field:eq(0) input[value=\"John Smith\"]',\n        },\n        wTourUtils.clickOnEdit(),\n        {\n            content: 'Click on the submit button',\n            trigger: 'iframe .s_website_form_send',\n            extra_trigger: '.o_website_preview.editor_enable',\n            run: 'click',\n        },\n        {\n            content: 'Change the Recipient Email',\n            trigger: '[data-field-name=\"email_to\"] input',\n            run: 'text test@test.test',\n        },\n        {\n            content: 'Save the page',\n            trigger: 'button[data-action=save]',\n            run: 'click',\n        },\n        {\n            content: 'Verify that the recipient email has been saved',\n            trigger: 'iframe body:not(.editor_enable)',\n            // We have to this that way because the input type = hidden.\n            extra_trigger: 'iframe form:has(input[name=\"email_to\"][value=\"test@test.test\"])',\n        },\n    ]);\n\n    function editContactUs(steps) {\n        return [\n            {\n                content: \"Select the contact us form by clicking on an input field\",\n                trigger: 'iframe .s_website_form input',\n                extra_trigger: '#oe_snippets .oe_snippet_thumbnail',\n                run: 'click',\n            },\n            ...steps,\n            {\n                content: 'Save the page',\n                trigger: 'button[data-action=save]',\n            },\n            {\n                content: 'Wait for reload',\n                trigger: 'body:not(.editor_enable)',\n            },\n        ];\n    }\n\n    wTourUtils.registerWebsitePreviewTour('website_form_contactus_edition_with_email', {\n        url: '/contactus',\n        edition: true,\n        test: true,\n    }, editContactUs([\n        {\n            content: 'Change the Recipient Email',\n            trigger: '[data-field-name=\"email_to\"] input',\n            run: 'text test@test.test',\n        },\n    ]));\n    wTourUtils.registerWebsitePreviewTour('website_form_contactus_edition_no_email', {\n        url: '/contactus',\n        edition: true,\n        test: true,\n    }, editContactUs([\n        {\n            content: \"Change a random option\",\n            trigger: '[data-set-mark] input',\n            run: 'text_blur **',\n        },\n    ]));\n\n    wTourUtils.registerWebsitePreviewTour('website_form_conditional_required_checkboxes', {\n        test: true,\n        url: '/',\n    }, [\n        // Create a form with two checkboxes: the second one required but\n        // invisible when the first one is checked. Basically this should allow\n        // to have: both checkboxes are visible by default but the form can\n        // only be sent if one of the checkbox is checked.\n        {\n            content: \"Enter edit mode\",\n            trigger: '.o_edit_website_container > a',\n        }, {\n            content: \"Add the form snippet\",\n            trigger: '#oe_snippets .oe_snippet:has(.s_website_form) .oe_snippet_thumbnail',\n            run: 'drag_and_drop iframe #wrap',\n        }, {\n            content: \"Select the form by clicking on an input field\",\n            extra_trigger: 'iframe .s_website_form_field',\n            trigger: 'iframe section.s_website_form input',\n            run: function (actions) {\n                actions.auto();\n\n                // The next steps will be about removing non essential required\n                // fields. For the robustness of the test, check that amount\n                // of field stays the same.\n                const requiredFields = this.$anchor.closest('[data-snippet]').find('.s_website_form_required');\n                if (requiredFields.length !== NB_NON_ESSENTIAL_REQUIRED_FIELDS_IN_DEFAULT_FORM) {\n                    console.error('The amount of required fields seems to have changed');\n                }\n            },\n        },\n        ...((function () {\n            const steps = [];\n            for (let i = 0; i < NB_NON_ESSENTIAL_REQUIRED_FIELDS_IN_DEFAULT_FORM; i++) {\n                steps.push({\n                    content: \"Select required field to remove\",\n                    trigger: 'iframe .s_website_form_required .s_website_form_input',\n                });\n                steps.push({\n                    content: \"Remove required field\",\n                    trigger: 'iframe .oe_overlay .oe_snippet_remove',\n                });\n            }\n            return steps;\n        })()),\n        ...addCustomField('boolean', 'checkbox', 'Checkbox 1', false),\n        ...addCustomField('boolean', 'checkbox', 'Checkbox 2', true, {visibility: CONDITIONALVISIBILITY}),\n        {\n            content: \"Open condition item select\",\n            trigger: 'we-select[data-name=\"hidden_condition_opt\"] we-toggler',\n        }, {\n            content: \"Choose first checkbox as condition item\",\n            trigger: 'we-button[data-set-visibility-dependency=\"Checkbox 1\"]',\n        }, {\n            content: \"Open condition comparator select\",\n            trigger: 'we-select[data-attribute-name=\"visibilityComparator\"] we-toggler',\n        }, {\n            content: \"Choose 'not equal to' comparator\",\n            trigger: 'we-button[data-select-data-attribute=\"!selected\"]',\n        }, {\n            content: 'Save the page',\n            trigger: 'button[data-action=save]',\n        },\n\n        // Check that the resulting form behavior is correct\n        {\n            content: \"Wait for page reload\",\n            trigger: 'iframe body:not(.editor_enable) [data-snippet=\"s_website_form\"]',\n            run: function (actions) {\n                // The next steps will be about removing non essential required\n                // fields. For the robustness of the test, check that amount\n                // of field stays the same.\n                const essentialFields = this.$anchor.find('.s_website_form_model_required');\n                if (essentialFields.length !== ESSENTIAL_FIELDS_VALID_DATA_FOR_DEFAULT_FORM.length) {\n                    console.error('The amount of model-required fields seems to have changed');\n                }\n            },\n        },\n        ...essentialFieldsForDefaultFormFillInSteps,\n        {\n            content: 'Try sending empty form',\n            trigger: 'iframe .s_website_form_send',\n        }, {\n            content: 'Check the form could not be sent',\n            trigger: 'iframe #s_website_form_result.text-danger',\n            run: () => null,\n        }, {\n            content: 'Check the first checkbox',\n            trigger: 'iframe input[type=\"checkbox\"][name=\"Checkbox 1\"]',\n        }, {\n            content: 'Check the second checkbox is now hidden',\n            trigger: 'iframe .s_website_form:has(input[type=\"checkbox\"][name=\"Checkbox 2\"]:not(:visible))',\n            run: () => null,\n        }, {\n            content: 'Try sending the form',\n            trigger: 'iframe .s_website_form_send',\n        }, {\n            content: \"Check the form was sent (success page without form)\",\n            trigger: 'iframe body:not(:has([data-snippet=\"s_website_form\"])) .fa-check-circle',\n            run: () => null,\n        }, {\n            content: \"Go back to the form\",\n            trigger: 'iframe a.navbar-brand.logo',\n        },\n        ...essentialFieldsForDefaultFormFillInSteps,\n        {\n            content: 'Check the second checkbox',\n            trigger: 'iframe input[type=\"checkbox\"][name=\"Checkbox 2\"]',\n        }, {\n            content: 'Try sending the form again',\n            trigger: 'iframe .s_website_form_send',\n        }, {\n            content: \"Check the form was again sent (success page without form)\",\n            trigger: 'iframe body:not(:has([data-snippet=\"s_website_form\"])) .fa-check-circle',\n            run: () => null,\n        }\n    ]);\n\n    return {};\n});\n", "/** @odoo-module **/\nimport tour from 'web_tour.tour';\nimport rpc from 'web.rpc';\n\ntour.register(\"website_form_editor_tour_submit\", {\n    test: true,\n},[\n    {\n        content:  \"Try to send the form with some required fields not filled in\",\n        extra_trigger:  \"form[data-model_name='mail.mail']\" +\n                        \"[data-success-page='/contactus-thank-you']\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Name')):has(input[type='text'][name='name'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Email')):has(input[type='email'][name='email_from'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Question')):has(textarea[name='description'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Subject')):has(input[type='text'][name='subject'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Test Date')):has(input[type='text'][name='date'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Awesome Label')):hidden)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Message')):has(textarea[name='body_html'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Iphone'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Galaxy S'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Xperia'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Products')):has(input[type='checkbox'][name='Products'][value='Wiko Stairway'][required]))\" +\n                        \":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='After-sales Service']:not([required])))\" +\n                        \":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='Invoicing Service']:not([required])))\" +\n                        \":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='Development Service']:not([required])))\" +\n                        \":has(.s_website_form_field:has(label:contains('Service')):has(input[type='radio'][name='Service'][value='Management Service']:not([required])))\" +\n                        \":has(.s_website_form_field:has(label:contains('State')):has(select[name='State'][required]:has(option[value='Belgium'])))\" +\n                        \":has(.s_website_form_field.s_website_form_required:has(label:contains('State')):has(select[name='State'][required]:has(option[value='France'])))\" +\n                        \":has(.s_website_form_field:has(label:contains('State')):has(select[name='State'][required]:has(option[value='Canada'])))\" +\n                        \":has(.s_website_form_field:has(label:contains('Invoice Scan')))\" +\n                        \":has(.s_website_form_field:has(input[name='email_to'][value='test@test.test']))\",\n        trigger:  \".s_website_form_send\"\n    },\n    {\n        content:  \"Check if required fields were detected and complete the Subject field\",\n        extra_trigger:  \"form:has(#s_website_form_result.text-danger)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Name')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Email')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Question')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Subject')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Test Date')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Message')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Products')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Service')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('State')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Invoice Scan')):not(.o_has_error))\",\n        trigger:  \"input[name=subject]\",\n        run:      \"text Jane Smith\"\n    },\n    {\n        content:  \"Update required field status by trying to Send again\",\n        trigger:  \".s_website_form_send\"\n    },\n    {\n        content:  \"Check if required fields were detected and complete the Message field\",\n        extra_trigger:  \"form:has(#s_website_form_result.text-danger)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Name')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Email')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Question')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Subject')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Test Date')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Message')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Products')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Service')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('State')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Invoice Scan')):not(.o_has_error))\",\n        trigger:  \"textarea[name=body_html]\",\n        run:      \"text A useless message\"\n    },\n    {\n        content:  \"Update required field status by trying to Send again\",\n        trigger:  \".s_website_form_send\"\n    },\n    {\n        content:  \"Check if required fields was detected and check a product. If this fails, you probably broke the cleanForSave.\",\n        extra_trigger:  \"form:has(#s_website_form_result.text-danger)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Name')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Email')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Question')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Subject')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Test Date')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Your Message')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Products')).o_has_error)\" +\n                        \":has(.s_website_form_field:has(label:contains('Service')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('State')):not(.o_has_error))\" +\n                        \":has(.s_website_form_field:has(label:contains('Invoice Scan')):not(.o_has_error))\",\n        trigger:  \"input[name=Products][value='Wiko Stairway']\"\n    },\n    {\n        content:  \"Complete Date field\",\n        trigger:  \".s_website_form_datetime [data-toggle='datetimepicker']\",\n    },\n    {\n        content:  \"Check another product\",\n        trigger:  \"input[name='Products'][value='Xperia']\"\n    },\n    {\n        content:  \"Check a service\",\n        trigger:  \"input[name='Service'][value='Development Service']\"\n    },\n    {\n        content:  \"Complete Your Name field\",\n        trigger:  \"input[name='name']\",\n        run:      \"text chhagan\"\n    },\n    {\n        content:  \"Complete Email field\",\n        trigger:  \"input[name=email_from]\",\n        run:      \"text test@mail.com\"\n    },\n    {\n        content: \"Complete Subject field\",\n        trigger: 'input[name=\"subject\"]',\n        run: 'text subject',\n    },\n    {\n        content:  \"Complete Your Question field\",\n        trigger:  \"textarea[name='description']\",\n        run:      \"text magan\"\n    },\n    {\n        content: \"Check if conditional field is visible, it shouldn't.\",\n        trigger: \"body\",\n        run: function () {\n            const style = window.getComputedStyle(this.$anchor[0].getElementsByClassName('s_website_form_field_hidden_if')[0]);\n            if (style.display !== 'none') {\n                console.error('error This field should be invisible when the name is not odoo');\n            }\n        }\n    },\n    {\n        content: \"Change name input\",\n        trigger: \"input[name='name']\",\n        run: \"text odoo\",\n    },\n    {\n        content: \"Check if conditional field is visible, it should.\",\n        trigger: \"input[name='email_cc']\",\n    },\n    {\n        content: \"Select state option\",\n        trigger: \"select[name='State']\",\n        run: 'text 44 - UK',\n    },\n    {\n        content:  \"Send the form\",\n        trigger:  \".s_website_form_send\"\n    },\n    {\n        content:  \"Check form is submitted without errors\",\n        trigger:  \"#wrap:has(h1:contains('Thank You!'))\"\n    }\n]);\n\ntour.register(\"website_form_editor_tour_results\", {\n    test: true,\n}, [\n    {\n        content: \"Check mail.mail records have been created\",\n        trigger: \"body\",\n        run: function () {\n            var mailDef = rpc.query({\n                    model: 'mail.mail',\n                    method: 'search_count',\n                    args: [[\n                        ['email_to', '=', 'test@test.test'],\n                        ['body_html', 'like', 'A useless message'],\n                        ['body_html', 'like', 'Service : Development Service'],\n                        ['body_html', 'like', 'State : 44 - UK'],\n                        ['body_html', 'like', 'Products : Xperia,Wiko Stairway']\n                    ]],\n                });\n            var success = function(model, count) {\n                if (count > 0) {\n                    $('body').append('<div id=\"website_form_editor_success_test_tour_'+model+'\"></div>');\n                }\n            };\n            mailDef.then(_.bind(success, this, 'mail_mail'));\n        }\n    },\n    {\n        content:  \"Check mail.mail records have been created\",\n        trigger:  \"#website_form_editor_success_test_tour_mail_mail\"\n    }\n]);\ntour.register('website_form_contactus_submit', {\n    test: true,\n    url: '/contactus',\n}, [\n    // As the demo portal user, only two inputs needs to be filled to send\n    // the email\n    {\n        content: \"Fill in the subject\",\n        trigger: 'input[name=\"subject\"]',\n    },\n    {\n        content: 'Fill in the message',\n        trigger: 'textarea[name=\"description\"]',\n    },\n    {\n        content: 'Send the form',\n        trigger: '.s_website_form_send',\n    },\n    {\n        content: 'Check form is submitted without errors',\n        trigger: '#wrap:has(h1:contains(\"Thank You!\"))',\n    },\n]);\n", "odoo.define(\"website.tour.website_navbar_menu\", function (require) {\n\"use strict\";\n\nvar tour = require(\"web_tour.tour\");\n\ntour.register(\"website_navbar_menu\", {\n    test: true,\n    url: \"/\",\n}, [\n    {\n        content: \"Ensure menus are in DOM\",\n        trigger: '#top_menu .nav-item a:contains(\"Test Tour Menu\")',\n        run: function () {}, // it's a check\n    }, {\n        content: \"Ensure menus loading is done (so they are actually visible)\",\n        trigger: 'body:not(:has(.o_menu_loading))',\n        run: function () {}, // it's a check\n    }\n]);\n});\n", "/** @odoo-module **/\n\nimport wTourUtils from 'website.tour_utils';\n\nwTourUtils.registerWebsitePreviewTour('website_page_options', {\n    test: true,\n    url: '/',\n    edition: true,\n}, [\n    wTourUtils.clickOnSnippet({id: 'o_header_standard', name: 'Header'}),\n    wTourUtils.changeOption('TopMenuVisibility', 'we-select:has([data-visibility]) we-toggler'),\n    wTourUtils.changeOption('TopMenuVisibility', 'we-button[data-visibility=\"transparent\"]'),\n    // It's important to test saving right after changing that option only as\n    // this is why this test was made in the first place: the page was not\n    // marked as dirty when that option was the only one that was changed.\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"Check that the header is transparent\",\n        trigger: 'iframe #wrapwrap.o_header_overlay',\n        run: () => null, // it's a check\n    },\n    wTourUtils.clickOnEdit(),\n    wTourUtils.clickOnSnippet({id: 'o_header_standard', name: 'Header'}),\n    wTourUtils.changeOption('topMenuColor', 'we-select.o_we_so_color_palette'),\n    wTourUtils.changeOption('topMenuColor', 'button[data-color=\"black-50\"]', 'background color', 'bottom', true),\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"Check that the header is in black-50\",\n        trigger: 'iframe header#top.bg-black-50',\n        run: () => null, // it's a check\n    },\n    wTourUtils.clickOnEdit(),\n    wTourUtils.clickOnSnippet({id: 'o_header_standard', name: 'Header'}),\n    wTourUtils.changeOption('TopMenuVisibility', 'we-select:has([data-visibility]) we-toggler'),\n    wTourUtils.changeOption('TopMenuVisibility', 'we-button[data-visibility=\"hidden\"]'),\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"Check that the header is hidden\",\n        trigger: 'iframe #wrapwrap:has(header#top.d-none.o_snippet_invisible)',\n        run: () => null, // it's a check\n    },\n    wTourUtils.clickOnEdit(),\n    {\n        content: \"Click on 'header' in the invisible elements list\",\n        extra_trigger: '#oe_snippets.o_loaded',\n        trigger: '.o_we_invisible_el_panel .o_we_invisible_entry',\n    },\n    wTourUtils.clickOnSnippet({id: 'o_footer', name: 'Footer'}),\n    wTourUtils.changeOption('HideFooter', 'we-button[data-name=\"hide_footer_page_opt\"] we-checkbox'),\n    ...wTourUtils.clickOnSave(),\n    {\n        content: \"Check that the footer is hidden and the header is visible\",\n        trigger: 'iframe #wrapwrap:has(.o_footer.d-none.o_snippet_invisible)',\n        extra_trigger: 'iframe #wrapwrap header#top:not(.d-none)',\n        run: () => null, // it's a check\n    },\n]);\n", "/** @odoo-module **/\n\nimport tour from 'web_tour.tour';\nimport wTourUtils from 'website.tour_utils';\n\ntour.register(\"website_snippets_menu_tabs\", {\n    test: true,\n    url: \"/?enable_editor=1\",\n}, [\n    wTourUtils.goToTheme(),\n    {\n        content: \"Click on the empty 'DRAG BUILDING BLOCKS HERE' area.\",\n        extra_trigger: 'we-customizeblock-option.snippet-option-ThemeColors',\n        trigger: 'iframe main > .oe_structure.oe_empty',\n        run: 'click',\n    },\n    wTourUtils.goToTheme(),\n    {\n        content: \"Verify that the customize panel is not empty.\",\n        trigger: '.o_we_customize_panel > we-customizeblock-options',\n        run: () => null, // it's a check\n    },\n    {\n        content: \"Click on the style tab.\",\n        trigger: '#snippets_menu .o_we_customize_snippet_btn',\n    },\n    wTourUtils.goToTheme(),\n    {\n        content: \"Verify that the customize panel is not empty.\",\n        trigger: '.o_we_customize_panel > we-customizeblock-options',\n        run: () => null, // it's a check\n    },\n]);\n", "odoo.define(\"website.tour.website_style_edition\", function (require) {\n\"use strict\";\n\nconst wTourUtils = require(\"website.tour_utils\");\n\nconst TARGET_FONT_SIZE = 30;\n\nconst checkFontSize = function (actions) {\n    const style = actions.tip_widget.el.ownerDocument.defaultView.getComputedStyle(this.$anchor[0]);\n    if (style.fontSize !== `${TARGET_FONT_SIZE}px`) {\n        console.error(`Expected the font-size to be equal to ${TARGET_FONT_SIZE}px but found ${style.fontSize} instead`);\n    }\n};\n\nwTourUtils.registerWebsitePreviewTour(\"website_style_edition\", {\n    test: true,\n    url: '/',\n    edition: true,\n}, [{\n    content: \"Go to theme options\",\n    extra_trigger: '#oe_snippets.o_loaded',\n    trigger: '.o_we_customize_theme_btn',\n}, {\n    content: \"Change font size\",\n    trigger: '[data-variable=\"font-size-base\"] input',\n    run: `text_blur ${TARGET_FONT_SIZE}`,\n}, {\n    content: \"Check the font size was properly adapted\",\n    trigger: 'iframe #wrapwrap',\n    // Waiting the CSS to be reloaded: the code adds a new assets bundle with\n    // a #t=... at the end then removes the old one.\n    extra_trigger: 'iframe html:not(:has(link[href$=\"web.assets_frontend.min.css\"]))',\n    run: checkFontSize,\n},\n...wTourUtils.clickOnSave(),\n{\n    content: \"Check the font size is still ok outside of edit mode\",\n    trigger: 'iframe body:not(.editor_enable) #wrapwrap',\n    run: checkFontSize,\n},\nwTourUtils.clickOnEdit(),\nwTourUtils.goToTheme(),\n{\n    content: \"Click on the Background Image selection\",\n    trigger: '[data-customize-body-bg-type=\"\\'image\\'\"]:not(.active)',\n    extra_trigger: '[data-customize-body-bg-type=\"NONE\"].active',\n}, {\n    content: \"The media dialog should open\",\n    trigger: '.o_select_media_dialog',\n    run: () => {}, // It's a check.\n}]);\n});\n", "/** @odoo-module **/\nimport { patch } from 'web.utils';\nimport { WebsitePreview } from '@website/client_actions/website_preview/website_preview';\n\npatch(WebsitePreview.prototype, 'website_preview_test_mode', {\n    /**\n     * @override\n     */\n    get testMode() {\n        return true;\n    }\n});\n", "odoo.define('stock.reports.setup.tour', function (require) {\n    \"use strict\";\n\n    const tour = require('web_tour.tour');\n\n    tour.register('test_stock_route_diagram_report', {\n        test: true,\n    }, [\n    {\n        trigger: '.o_kanban_record',\n        extra_trigger:'.breadcrumb',\n    },\n    {\n        trigger: '.nav-item > a:contains(\"Inventory\")',\n    },\n    {\n        trigger: '.btn[id=\"stock.view_diagram_button\"]',\n    },\n    {\n        trigger: 'iframe .o_report_stock_rule',\n    },\n    ]);\n});\n", "odoo.define('auth_totp.tours', function(require) {\n\"use strict\";\n\nconst tour = require('web_tour.tour');\nconst ajax = require('web.ajax');\n\nfunction openRoot() {\n    return [{\n        content: \"return to client root to avoid race condition\",\n        trigger: 'body',\n        run() {\n            $('body').addClass('wait');\n            window.location = '/web';\n        }\n    }, {\n        content: \"wait for client reload\",\n        trigger: 'body:not(.wait)',\n        run() {}\n    }];\n}\nfunction openUserProfileAtSecurityTab() {\n    return [{\n        content: 'Open user account menu',\n        trigger: '.o_user_menu .oe_topbar_name',\n        run: 'click',\n    }, {\n        content: \"Open preferences / profile screen\",\n        trigger: '[data-menu=settings]',\n        run: 'click',\n    }, {\n        content: \"Switch to security tab\",\n        trigger: 'a[role=tab]:contains(\"Account Security\")',\n        run: 'click',\n    }];\n}\n\n/**\n * Checks that the TOTP button is in the specified state (true = enabled =\n * can disable, false = disabled = can enable), then closes the profile dialog\n * if it's one (= hr not installed).\n *\n * If no totp state is provided, just checks that the toggle exists.\n */\nfunction closeProfileDialog({content, totp_state}) {\n    let trigger;\n    switch (totp_state) {\n    case true: trigger = 'button[name=action_totp_disable]'; break;\n    case false: trigger = 'button[name=action_totp_enable_wizard]'; break;\n    case undefined: trigger = 'button.o_auth_2fa_btn'; break;\n    default: throw new Error(`Invalid totp state ${totp_state}`)\n    }\n\n    return [{\n        content,\n        trigger,\n        run() {\n            const $modal = this.$anchor.parents('.o_dialog_container');\n            if ($modal.length) {\n                $modal.find('button[name=preference_cancel]').click()\n            }\n        }\n    }, {\n        trigger: 'body',\n        async run() {\n            while (document.querySelector('.o_dialog_container .o_dialog')) {\n                await Promise.resolve();\n            }\n            this.$anchor.addClass('dialog-closed');\n        },\n    }, {\n        trigger: 'body.dialog-closed',\n        run() {},\n    }];\n}\n\ntour.register('totp_tour_setup', {\n    test: true,\n    url: '/web'\n}, [...openUserProfileAtSecurityTab(), {\n    content: \"Open totp wizard\",\n    trigger: 'button[name=action_totp_enable_wizard]',\n}, {\n    content: \"Check that we have to enter enhanced security mode and input password\",\n    extra_trigger: 'div:contains(\"enter your password\")',\n    trigger: '[name=password] input',\n    run: 'text demo',\n}, {\n    content: \"Confirm\",\n    trigger: \"button:contains(Confirm Password)\",\n}, {\n    content: \"Check the wizard has opened\",\n    trigger: 'li:contains(\"When requested to do so\")',\n    run() {}\n}, {\n    content: \"Get secret from collapsed div\",\n    trigger: 'a:contains(\"Cannot scan it?\")',\n    async run(helpers) {\n        const $secret = this.$anchor.closest('div').find('[name=secret] span:first-child');\n        const $copyBtn = $secret.find('button');\n        $copyBtn.remove();\n        const token = await ajax.jsonRpc('/totphook', 'call', {\n            secret: $secret.text()\n        });\n        helpers.text(token, '[name=code] input');\n        helpers.click('button.btn-primary:contains(Activate)');\n        $('body').addClass('got-token')\n    }\n}, {\n    content: 'wait for rpc',\n    trigger: 'body.got-token',\n    run() {}\n},\n...openRoot(),\n...openUserProfileAtSecurityTab(),\n...closeProfileDialog({\n    content: \"Check that the button has changed\",\n    totp_state: true,\n}),\n]);\n\ntour.register('totp_login_enabled', {\n    test: true,\n    url: '/'\n}, [{\n    content: \"check that we're on the login page or go to it\",\n    trigger: 'input#login, a:contains(Sign in)'\n}, {\n    content: \"input login\",\n    trigger: 'input#login',\n    run: 'text demo',\n}, {\n    content: 'input password',\n    trigger: 'input#password',\n    run: 'text demo',\n}, {\n    content: \"click da button\",\n    trigger: 'button:contains(\"Log in\")',\n}, {\n    content: \"expect totp screen\",\n    trigger: 'label:contains(Authentication Code)',\n}, {\n    content: \"input code\",\n    trigger: 'input[name=totp_token]',\n    async run(helpers) {\n        // TODO: if tours are ever async-aware the click should get moved out,\n        //       but currently there's no great way to make the tour wait until\n        //       we've retrieved and set the token: `:empty()` is aboutthe text\n        //       content of the HTML element, not the JS value property. We\n        //       could set a class but that's really no better than\n        //       procedurally clicking the button after we've set the input.\n        const token = await ajax.jsonRpc('/totphook', 'call', {});\n        helpers.text(token);\n        helpers.click('button:contains(\"Log in\")');\n    }\n}, {\n    content: \"check we're logged in\",\n    trigger: \".o_user_menu .oe_topbar_name\",\n    run() {}\n}]);\n\ntour.register('totp_login_device', {\n    test: true,\n    url: '/'\n}, [{\n    content: \"check that we're on the login page or go to it\",\n    trigger: 'input#login, a:contains(Sign in)'\n}, {\n    content: \"input login\",\n    trigger: 'input#login',\n    run: 'text demo',\n}, {\n    content: 'input password',\n    trigger: 'input#password',\n    run: 'text demo',\n}, {\n    content: \"click da button\",\n    trigger: 'button:contains(\"Log in\")',\n}, {\n    content: \"expect totp screen\",\n    trigger: 'label:contains(Authentication Code)',\n}, {\n    content: \"check remember device box\",\n    trigger: 'label[for=switch-remember]',\n}, {\n    content: \"input code\",\n    trigger: 'input[name=totp_token]',\n    async run(helpers) {\n        const token = await ajax.jsonRpc('/totphook', 'call', {})\n        helpers.text(token);\n        helpers.click('button:contains(\"Log in\")');\n    }\n}, {\n    content: \"check we're logged in\",\n    trigger: \".o_user_menu .oe_topbar_name\",\n    run: 'click',\n}, {\n    content: \"click the Log out button\",\n    trigger: '.dropdown-item[data-menu=logout]',\n}, {\n    content: \"check that we're back on the login page or go to it\",\n    trigger: 'input#login, a:contains(Log in)'\n}, {\n    content: \"input login again\",\n    trigger: 'input#login',\n    run: 'text demo',\n}, {\n    content: 'input password again',\n    trigger: 'input#password',\n    run: 'text demo',\n}, {\n    content: \"click da button again\",\n    trigger: 'button:contains(\"Log in\")',\n},  {\n    content: \"check we're logged in without 2FA\",\n    trigger: \".o_user_menu .oe_topbar_name\",\n    run() {}\n},\n// now go and disable two-factor authentication would be annoying to do in a separate tour\n// because we'd need to login & totp again as HttpCase.authenticate can't\n// succeed w/ totp enabled\n...openUserProfileAtSecurityTab(),\n{\n    content: \"Open totp wizard\",\n    trigger: 'button[name=action_totp_disable]',\n}, {\n    content: \"Check that we have to enter enhanced security mode and input password\",\n    extra_trigger: 'div:contains(\"enter your password\")',\n    trigger: '[name=password] input',\n    run: 'text demo',\n}, {\n    content: \"Confirm\",\n    trigger: \"button:contains(Confirm Password)\",\n},\n...openRoot(),\n...openUserProfileAtSecurityTab(),\n...closeProfileDialog({\n    content: \"Check that the button has changed\",\n    totp_state: false\n}),\n]);\n\ntour.register('totp_login_disabled', {\n    test: true,\n    url: '/'\n}, [{\n    content: \"check that we're on the login page or go to it\",\n    trigger: 'input#login, a:contains(Sign in)'\n}, {\n    content: \"input login\",\n    trigger: 'input#login',\n    run: 'text demo',\n}, {\n    content: 'input password',\n    trigger: 'input#password',\n    run: 'text demo',\n}, {\n    content: \"click da button\",\n    trigger: 'button:contains(\"Log in\")',\n},\n// normally we'd end the tour here as it's all we care about but there are a\n// bunch of ongoing queries from the loading of the web client which cause\n// issues, so go and open the preferences / profile screen to make sure\n// everything settles down\n...openUserProfileAtSecurityTab(),\n// close the dialog if that makes sense\n...closeProfileDialog({})\n]);\n\nconst columns = {};\ntour.register('totp_admin_disables', {\n    test: true,\n    url: '/web'\n}, [tour.stepUtils.showAppsMenuItem(), {\n    content: 'Go to settings',\n    trigger: '[data-menu-xmlid=\"base.menu_administration\"]'\n}, {\n    content: 'Wait for page',\n    trigger: '.o_menu_brand:contains(\"Settings\")',\n    run() {}\n}, {\n    content: \"Open Users menu\",\n    trigger: '[data-menu-xmlid=\"base.menu_users\"]'\n}, {\n    content: \"Open Users view\",\n    trigger: '[data-menu-xmlid=\"base.menu_action_res_users\"]',\n    run(helpers) {\n        // funny story: the users view we're trying to reach, sometimes we're\n        // already there, but if we re-click the next step executes before the\n        // action has the time to re-load, the one after that doesn't, and our\n        // selection get discarded by the action reloading, so here try to\n        // see if we're already on the users action through the breadcrumb and\n        // just close the menu if so\n        const $crumb = $('.breadcrumb');\n        if ($crumb.text().indexOf('Users') === -1) {\n            // on general settings page, click menu\n            helpers.click();\n        } else {\n            // else close menu\n            helpers.click($('[data-menu-xmlid=\"base.menu_users\"]'));\n        }\n    }\n}, {\n    content: \"Find Demo User\",\n    trigger: 'td.o_data_cell:contains(\"demo\")',\n    run(helpers) {\n        const $titles = this.$anchor.closest('table').find('tr:first th');\n        for (let i=0; i<$titles.length; ++i) {\n            columns[$titles[i].getAttribute('data-name')] = i;\n        }\n        const $row = this.$anchor.closest('tr');\n        const sel = $row.find('.o_list_record_selector input[type=checkbox]');\n        helpers.click(sel);\n    }\n}, {\n    content: \"Open Actions menu\",\n    trigger: 'button.dropdown-toggle:contains(\"Action\")'\n}, {\n    content: \"Select totp remover\",\n    trigger: 'span.dropdown-item:contains(Disable two-factor authentication)'\n}, { // enhanced security yo\n    content: \"Check that we have to enter enhanced security mode & input password\",\n    extra_trigger: 'div:contains(\"enter your password\")',\n    trigger: '[name=password] input',\n    run: 'text admin',\n}, {\n    content: \"Confirm\",\n    trigger: \"button:contains(Confirm Password)\",\n}, {\n    content: \"open the user's form\",\n    trigger: \"td.o_data_cell:contains(demo)\",\n}, {\n    content: \"go to Account security Tab\",\n    trigger: \"a.nav-link:contains(Account Security)\",\n}, ...closeProfileDialog({\n    content: \"check that demo user has been de-totp'd\",\n    totp_state: false,\n}),\n])\n});\n", "odoo.define('auth_totp_mail.tours', function(require) {\n\"use strict\";\n\nconst tour = require('web_tour.tour');\n\nfunction openAccountSettingsTab() {\n    return [{\n        content: 'Go to settings',\n        trigger: '[data-menu-xmlid=\"base.menu_administration\"]'\n    }, {\n        content: 'Wait for page',\n        trigger: '.o_menu_brand:contains(\"Settings\")',\n        run: () => {}\n    }, {\n        content: \"Open Users menu\",\n        trigger: '[data-menu-xmlid=\"base.menu_users\"]'\n    }, {\n        content: \"Open Users view\",\n        trigger: '[data-menu-xmlid=\"base.menu_action_res_users\"]',\n        run: function (helpers) {\n            // funny story: the users view we're trying to reach, sometimes we're\n            // already there, but if we re-click the next step executes before the\n            // action has the time to re-load, the one after that doesn't, and our\n            // selection get discarded by the action reloading, so here try to\n            // see if we're already on the users action through the breadcrumb and\n            // just close the menu if so\n            const $crumb = $('.breadcrumb');\n            if ($crumb.text().indexOf('Users') === -1) {\n                // on general settings page, click menu\n                helpers.click();\n            } else {\n                // else close menu\n                helpers.click($('[data-menu-xmlid=\"base.menu_users\"]'));\n            }\n        }\n    }];\n}\n\ntour.register('totp_admin_self_invite', {\n    test: true,\n    url: '/web'\n}, [tour.stepUtils.showAppsMenuItem(), ...openAccountSettingsTab(), {\n    content: \"open the user's form\",\n    trigger: \"td.o_data_cell:contains(admin)\",\n}, {\n    content: \"go to Account security Tab\",\n    trigger: \"a.nav-link:contains(Account Security)\",\n}, {\n    content: \"check that user cannot invite themselves to use 2FA.\",\n    trigger: \"body\",\n    run: function () {\n        const inviteBtn = $('button:contains(Invite to use 2FA)')[0];\n        if (!inviteBtn) {\n            $('body').addClass('CannotInviteYourself');\n        }\n    }\n}, {\n    content: \"check that user cannot invite themself.\",\n    trigger: \"body.CannotInviteYourself\"\n}]);\n\ntour.register('totp_admin_invite', {\n    test: true,\n    url: '/web'\n}, [tour.stepUtils.showAppsMenuItem(), ...openAccountSettingsTab(), {\n    content: \"open the user's form\",\n    trigger: \"td.o_data_cell:contains(demo)\",\n}, {\n    content: \"go to Account security Tab\",\n    trigger: \"a.nav-link:contains(Account Security)\",\n}, {\n    content: \"check that demo user can be invited to use 2FA.\",\n    trigger: \"button:contains(Invite to use 2FA)\",\n}]);\n\n});", "odoo.define('auth_totp_portal.tours', function(require) {\n\"use strict\";\n\nconst tour = require('web_tour.tour');\nconst ajax = require('web.ajax');\n\ntour.register('totportal_tour_setup', {\n    test: true,\n    url: '/my/security'\n}, [{\n    content: \"Open totp wizard\",\n    trigger: 'button#auth_totp_portal_enable',\n}, {\n    content: \"Check that we have to enter enhanced security mode\",\n    trigger: 'div:contains(\"enter your password\")',\n    run: () => {},\n}, {\n    content: \"Input password\",\n    trigger: '[name=password]',\n    run: 'text portal', // FIXME: better way to do this?\n}, {\n    content: \"Confirm\",\n    trigger: \"button:contains(Confirm Password)\",\n}, {\n    content: \"Check the wizard has opened\",\n    trigger: 'li:contains(\"scan the barcode below\")',\n    run: () => {}\n}, {\n    content: \"Get secret from collapsed div\",\n    trigger: 'a:contains(\"Cannot scan it?\")',\n    run: async function(helpers) {\n        const secret = this.$anchor.closest('div').find('span[name=\"secret\"]').text();\n        const token = await ajax.jsonRpc('/totphook', 'call', {\n            secret\n        });\n        helpers._text(helpers._get_action_values('input[name=code]'), token);\n        helpers._click(helpers._get_action_values('button.btn-primary:contains(Activate)'));\n    }\n}, {\n    content: \"Check that the button has changed\",\n    trigger: 'button:contains(Disable two-factor authentication)',\n    run: () => {}\n}]);\n\ntour.register('totportal_login_enabled', {\n    test: true,\n    url: '/'\n}, [{\n    content: \"check that we're on the login page or go to it\",\n    trigger: 'input#login, a:contains(Sign in)'\n}, {\n    content: \"input login\",\n    trigger: 'input#login',\n    run: 'text portal',\n}, {\n    content: 'input password',\n    trigger: 'input#password',\n    run: 'text portal',\n}, {\n    content: \"click da button\",\n    trigger: 'button:contains(\"Log in\")',\n}, {\n    content: \"expect totp screen\",\n    trigger: 'label:contains(Authentication Code)',\n}, {\n    content: \"input code\",\n    trigger: 'input[name=totp_token]',\n    run: async function (helpers) {\n        const token = await ajax.jsonRpc('/totphook', 'call', {});\n        helpers._text(helpers._get_action_values(), token);\n        // FIXME: is there a way to put the button as its own step trigger without\n        //        the tour straight blowing through and not waiting for this?\n        helpers._click(helpers._get_action_values('button:contains(\"Log in\")'));\n    }\n}, {\n    content: \"check we're logged in\",\n    trigger: \"h3:contains(Documents)\",\n    run: () => {}\n}, {\n    content: \"go back to security\",\n    trigger: \"a:contains(Security)\",\n},{\n    content: \"Open totp wizard\",\n    trigger: 'button#auth_totp_portal_disable',\n}, {\n    content: \"Check that we have to enter enhanced security mode\",\n    trigger: 'div:contains(\"enter your password\")',\n    run: () => {},\n}, {\n    content: \"Input password\",\n    trigger: '[name=password]',\n    run: 'text portal', // FIXME: better way to do this?\n}, {\n    content: \"Confirm\",\n    trigger: \"button:contains(Confirm Password)\",\n}, {\n    content: \"Check that the button has changed\",\n    trigger: 'button:contains(Enable two-factor authentication)',\n    run: () => {}\n}]);\n\ntour.register('totportal_login_disabled', {\n    test: true,\n    url: '/'\n}, [{\n    content: \"check that we're on the login page or go to it\",\n    trigger: 'input#login, a:contains(Sign in)'\n}, {\n    content: \"input login\",\n    trigger: 'input#login',\n    run: 'text portal',\n}, {\n    content: 'input password',\n    trigger: 'input#password',\n    run: 'text portal',\n}, {\n    content: \"click da button\",\n    trigger: 'button:contains(\"Log in\")',\n}, {\n    content: \"check we're logged in\",\n    trigger: \"h3:contains(Documents)\",\n    run: () => {}\n}]);\n});\n"], "file": "/web/assets/357-af8dde7/web.assets_tests.js", "sourceRoot": "../../../"}